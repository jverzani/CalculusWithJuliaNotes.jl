<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.30">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>68&nbsp; The SciML suite of packages – Calculus with Julia</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../alternatives/plotly_plotting.html" rel="next">
<link href="../alternatives/symbolics.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-de070a7b0ab54f8780927367ac907214.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-2b3e328b71be8d25427581baeb23079b.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-de070a7b0ab54f8780927367ac907214.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-fc3c171632cd6f9b39f96e8bd14edcbe.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-ead2ac9af0e74c5b0758b4163d044a68.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/bootstrap/bootstrap-fc3c171632cd6f9b39f96e8bd14edcbe.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Calculus with Julia</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
    <a href="https://github.com/jverzani/CalculusWithJuliaNotes.jl/tree/main/quarto/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../alternatives.html">Alternative packages</a></li><li class="breadcrumb-item"><a href="../alternatives/SciML.html"><span class="chapter-number">68</span>&nbsp; <span class="chapter-title">The SciML suite of packages</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mathematical basics</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../basics/calculator.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">From calculator to computer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../basics/variables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../basics/numbers_types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Number systems</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../basics/logical_expressions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Inequalities, Logical expressions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../basics/vectors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Vectors and containers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../basics/ranges.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ranges and sets</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../precalc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Precalculus Concepts</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/plotting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">The graph of a function</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/transformations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Function manipulations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/inversefunctions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">The inverse of a function</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/polynomial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Polynomials</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/polynomial_roots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Roots of a polynomial</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/polynomials_package.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">The Polynomials package</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/rational_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Rational functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/exp_log_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Exponential and logarithmic functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/trig_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Trigonometric functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/julia_overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Overview of Julia commands</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../limits.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Limits</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../limits/limits.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Limits</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../limits/limits_extensions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Limits, issues, extensions of the concept</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../limits/continuity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Continuity</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../limits/intermediate_value_theorem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Implications of continuity</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../derivatives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Derivatives</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/derivatives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Derivatives</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/numeric_derivatives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Numeric derivatives</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/symbolic_derivatives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Symbolic derivatives</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/mean_value_theorem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">The mean value theorem for differentiable functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/optimization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Optimization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/first_second_derivatives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">The first and second derivatives</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/curve_sketching.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Curve sketching</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/linearization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Linearization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/newtons_method.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Newton’s method</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/more_zeros.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Derivative-free alternatives to Newton’s method</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/lhospitals_rule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">L’Hospital’s rule</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/implicit_differentiation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Implicit differentiation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/related_rates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Related rates</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/taylor_series_polynomials.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Taylor polynomials and other approximating polynomials</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../integrals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Integrals</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/area.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Area under a curve</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/ftc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Fundamental Theorem of Calculus</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/substitution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Substitution</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/integration_by_parts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Integration by parts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/partial_fractions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Partial fractions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/improper_integrals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Improper integrals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/mean_value_theorem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Mean value theorem for integrals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/area_between_curves.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Area between two curves</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/center_of_mass.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Center of mass</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/volumes_slice.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Volumes by slicing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/arc_length.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Arc length</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/surface_area.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Surface area</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/orthogonal_polynomials.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Orthogonal polynomials</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/twelve-qs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">49</span>&nbsp; <span class="chapter-title">A dozen minima for a parabola</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../ODEs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ODEs</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ODEs/odes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">50</span>&nbsp; <span class="chapter-title">ODEs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ODEs/euler.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">51</span>&nbsp; <span class="chapter-title">Euler’s method</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ODEs/solve.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">52</span>&nbsp; <span class="chapter-title">The problem-algorithm-solve interface</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ODEs/differential_equations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">53</span>&nbsp; <span class="chapter-title">The <code>DifferentialEquations</code> suite</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../differentiable_vector_calculus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Differential vector calculus</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../differentiable_vector_calculus/polar_coordinates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">54</span>&nbsp; <span class="chapter-title">Polar coordinates and curves</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../differentiable_vector_calculus/vectors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">55</span>&nbsp; <span class="chapter-title">Vectors and matrices</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../differentiable_vector_calculus/vector_valued_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">56</span>&nbsp; <span class="chapter-title">Vector-valued functions, <span class="math inline">\(f:R \rightarrow R^n\)</span></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../differentiable_vector_calculus/scalar_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">57</span>&nbsp; <span class="chapter-title">Scalar functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../differentiable_vector_calculus/scalar_functions_applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">58</span>&nbsp; <span class="chapter-title">Applications with scalar functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../differentiable_vector_calculus/vector_fields.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">59</span>&nbsp; <span class="chapter-title">Functions <span class="math inline">\(R^n \rightarrow R^m\)</span></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../differentiable_vector_calculus/matrix_calculus_notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">60</span>&nbsp; <span class="chapter-title">Matrix calculus</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../differentiable_vector_calculus/plots_plotting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">61</span>&nbsp; <span class="chapter-title">2D and 3D plots in Julia with Plots</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../integral_vector_calculus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Integral vector calculus</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integral_vector_calculus/double_triple_integrals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">62</span>&nbsp; <span class="chapter-title">Multi-dimensional integrals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integral_vector_calculus/line_integrals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">63</span>&nbsp; <span class="chapter-title">Line and surface integrals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integral_vector_calculus/div_grad_curl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">64</span>&nbsp; <span class="chapter-title">The gradient, divergence, and curl</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integral_vector_calculus/stokes_theorem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">65</span>&nbsp; <span class="chapter-title">Green’s theorem, Stokes’ theorem, and the divergence theorem</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integral_vector_calculus/review.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">66</span>&nbsp; <span class="chapter-title">Quick review of vector calculus</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../alternatives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Alternative packages</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../alternatives/symbolics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">67</span>&nbsp; <span class="chapter-title">Symbolics.jl</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../alternatives/SciML.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">68</span>&nbsp; <span class="chapter-title">The SciML suite of packages</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../alternatives/plotly_plotting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">69</span>&nbsp; <span class="chapter-title">JavaScript based plotting libraries</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../alternatives/makie_plotting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">70</span>&nbsp; <span class="chapter-title">Calculus plots with Makie</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/getting_started_with_julia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">71</span>&nbsp; <span class="chapter-title">Getting started with Julia</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/julia_interfaces.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">72</span>&nbsp; <span class="chapter-title">Julia interfaces</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/calculus_with_julia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">73</span>&nbsp; <span class="chapter-title">The <code>CalculusWithJulia</code> package</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/unicode.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">74</span>&nbsp; <span class="chapter-title">Usages of Unicode symbols</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/quick_notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">75</span>&nbsp; <span class="chapter-title">Quick introduction to Calculus with Julia</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#symbolic-math-symbolics" id="toc-symbolic-math-symbolics" class="nav-link active" data-scroll-target="#symbolic-math-symbolics"><span class="header-section-number">68.1</span> Symbolic math (<code>Symbolics</code>)</a></li>
  <li><a href="#solving-equations" id="toc-solving-equations" class="nav-link" data-scroll-target="#solving-equations"><span class="header-section-number">68.2</span> Solving equations</a>
  <ul class="collapse">
  <li><a href="#linearsolve" id="toc-linearsolve" class="nav-link" data-scroll-target="#linearsolve"><span class="header-section-number">68.2.1</span> <code>LinearSolve</code></a></li>
  <li><a href="#nonlinearsolve" id="toc-nonlinearsolve" class="nav-link" data-scroll-target="#nonlinearsolve"><span class="header-section-number">68.2.2</span> <code>NonlinearSolve</code></a></li>
  <li><a href="#higher-dimensions" id="toc-higher-dimensions" class="nav-link" data-scroll-target="#higher-dimensions"><span class="header-section-number">68.2.3</span> Higher dimensions</a></li>
  <li><a href="#using-modelingtoolkit-to-model-a-non-linear-problem" id="toc-using-modelingtoolkit-to-model-a-non-linear-problem" class="nav-link" data-scroll-target="#using-modelingtoolkit-to-model-a-non-linear-problem"><span class="header-section-number">68.2.4</span> Using <code>ModelingToolkit</code> to model a non-linear problem</a></li>
  </ul></li>
  <li><a href="#optimization-optimization.jl" id="toc-optimization-optimization.jl" class="nav-link" data-scroll-target="#optimization-optimization.jl"><span class="header-section-number">68.3</span> Optimization (<code>Optimization.jl</code>)</a>
  <ul class="collapse">
  <li><a href="#two-dimensional" id="toc-two-dimensional" class="nav-link" data-scroll-target="#two-dimensional"><span class="header-section-number">68.3.1</span> Two dimensional</a></li>
  </ul></li>
  <li><a href="#integration-integrals.jl" id="toc-integration-integrals.jl" class="nav-link" data-scroll-target="#integration-integrals.jl"><span class="header-section-number">68.4</span> Integration (<code>Integrals.jl</code>)</a>
  <ul class="collapse">
  <li><a href="#higher-dimension-integrals" id="toc-higher-dimension-integrals" class="nav-link" data-scroll-target="#higher-dimension-integrals"><span class="header-section-number">68.4.1</span> Higher dimension integrals</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/jverzani/CalculusWithJuliaNotes.jl/edit/main/quarto/alternatives/SciML.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/jverzani/CalculusWithJuliaNotes.jl/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../alternatives.html">Alternative packages</a></li><li class="breadcrumb-item"><a href="../alternatives/SciML.html"><span class="chapter-number">68</span>&nbsp; <span class="chapter-title">The SciML suite of packages</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">68</span>&nbsp; <span class="chapter-title">The SciML suite of packages</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>The <code>Julia</code> ecosystem advances rapidly. For much of it, the driving force is the <a href="https://github.com/SciML">SciML</a> organization (Scientific Machine Learning).</p>
<p>In this section we describe some packages provided by this organization that could be used as alternatives to the ones utilized in these notes. Members of this organization created many packages for solving different types of differential equations, and have branched out from there. Many newer efforts of this organization have been to write uniform interfaces to other packages in the ecosystem, some of which are discussed below. We don’t discuss this key promise of SciML: “Performance is considered a priority, and performance issues are considered bugs,” as we don’t pursue features like in-place modification, sparsity, etc. Interested readers should consult the relevant packages documentation.</p>
<p>The basic structure to use these packages is the “problem-algorithm-solve” interface described in <a href="../ODEs/solve.html">The problem-algorithm-solve interface</a> sectino. We also discussed this interface a bit in <a href="../ODEs/differential_equations.html">ODEs</a>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>These packages are in a process of rapid development and change to them is expected.</p>
</div>
</div>
<section id="symbolic-math-symbolics" class="level2" data-number="68.1">
<h2 data-number="68.1" class="anchored" data-anchor-id="symbolic-math-symbolics"><span class="header-section-number">68.1</span> Symbolic math (<code>Symbolics</code>)</h2>
<p>The <code>Symbolics</code>, <code>SymbolicUtils</code>, and <code>ModelingToolkit</code> packages are provided by this organization. These can be viewed as an alternative to <code>SymPy</code>, which is used throughout this set of notes. See the section on <a href="./symbolics.html">Symbolics</a> for some additional details, the package <a href="https://symbolics.juliasymbolics.org/stable/">documentation</a>, or the documentation for <a href="https://github.com/JuliaSymbolics/SymbolicUtils.jl">SymbolicsUtils</a>.</p>
</section>
<section id="solving-equations" class="level2" data-number="68.2">
<h2 data-number="68.2" class="anchored" data-anchor-id="solving-equations"><span class="header-section-number">68.2</span> Solving equations</h2>
<p>Solving one or more equations (simultaneously) is different in the linear case (where solutions are readily found – though performance can distinguish approaches) and the nonlinear case – where for most situations, numeric approaches are required.</p>
<section id="linearsolve" class="level3" data-number="68.2.1">
<h3 data-number="68.2.1" class="anchored" data-anchor-id="linearsolve"><span class="header-section-number">68.2.1</span> <code>LinearSolve</code></h3>
<p>The <code>LinearSolve</code> package aims to generalize the solving of linear equations. For many cases these are simply represented as matrix equations of the form <code>Ax=b</code>, from which <code>Julia</code> (borrowing from MATLAB) offers the interface <code>A \ b</code> to yield <code>x</code>. There are scenarios that don’t naturally fit this structure and perhaps problems where different tolerances need to be specified, and the <code>LinearSolve</code> package aims to provide a common interface to handle these scenarios. As this set of notes doesn’t bump into such, this package is not described here. In the symbolic case, the <code>Symbolics.solve_for</code> function was described in <a href="./symbolics.html">Symbolics</a>.</p>
</section>
<section id="nonlinearsolve" class="level3" data-number="68.2.2">
<h3 data-number="68.2.2" class="anchored" data-anchor-id="nonlinearsolve"><span class="header-section-number">68.2.2</span> <code>NonlinearSolve</code></h3>
<p>The <code>NonlinearSolve</code> package can be seen as an alternative to the use of the <code>Roots</code> package in this set of notes. The package presents itself as “Fast implementations of root finding algorithms in Julia that satisfy the SciML common interface.”</p>
<p>The package is loaded through the following command:</p>
<div id="2" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">NonlinearSolve</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Unlike <code>Roots</code>, the package handles problems beyond the univariate case, as such, the simplest problems have a little extra setup required.</p>
<p>For example, suppose we want to use this package to solve for zeros of <span class="math inline">\(f(x) = x^5 - x - 1\)</span>. We could do so a few different ways.</p>
<p>An approach that most closely mirrors that of <code>Roots</code> would be:</p>
<div id="4" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(x, p) <span class="op">=</span> x<span class="op">^</span><span class="fl">5</span> <span class="op">-</span> x <span class="op">-</span> <span class="fl">1</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">NonlinearProblem</span>(f, <span class="fl">1.0</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(prob, <span class="fu">NewtonRaphson</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 1.1673039782614396</code></pre>
</div>
</div>
<p>The <code>NewtonRaphson</code> method uses a derivative of <code>f</code>, which <code>NonlinearSolve</code> computes using automatic differentiation.</p>
<p>However, it is more performant and not much more work to allow for a vector of starting values. For this, <code>f</code> can be defined as:</p>
<div id="6" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(u, p) <span class="op">=</span> @. (u<span class="op">^</span><span class="fl">5</span> <span class="op">-</span> u <span class="op">-</span> <span class="fl">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>f (generic function with 1 method)</code></pre>
</div>
</div>
<p>The function definition expects a container for the “<code>x</code>” variables and allows the passing of a container to hold parameters. We could have used the dotted operations for the power and each subtraction to allow vectorization of these basic math operations, as <code>u</code> is a container of values. The <code>@.</code> macro makes adding the “dots” quite easy, as illustrated above. It converts “every function call or operator in expr into a <code>dot call</code>.”</p>
<p>A problem is set up with this function and an initial guess. The <code>@SVector</code> specification for the guess is for performance purposes and is provided by the <code>StaticArrays</code> package.</p>
<div id="8" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">StaticArrays</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>u0 <span class="op">=</span> <span class="pp">@SVector</span>[<span class="fl">1.0</span>]</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">NonlinearProblem</span>(f, u0)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div class="ansi-escaped-output">
<pre><span style="color:rgb(86,182,194)">NonlinearProblem</span> with uType <span style="color:rgb(86,182,194)">SVector{1, Float64}</span>. In-place: <span style="color:rgb(86,182,194)">false</span>
u0: 1-element SVector{1, Float64} with indices SOneTo(1):
 1.0</pre>
</div>
</div>
</div>
<p>The problem is solved by calling <code>solve</code> with an appropriate method specified. Here we use Newton’s method.</p>
<div id="10" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>soln <span class="op">=</span> <span class="fu">solve</span>(prob, <span class="fu">NewtonRaphson</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 1-element SVector{1, Float64} with indices SOneTo(1):
 1.1673039782614396</code></pre>
</div>
</div>
<p>Again, the derivative of <code>f</code> is computed automatically.</p>
<p>The basic interface for retrieving the numeric solution from the solution object is to use indexing:</p>
<div id="12" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>soln[]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>1.1673039782614396</code></pre>
</div>
</div>
<hr>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This interface is more performant than <code>Roots</code>, though it isn’t an apples to oranges comparison, as different stopping criteria are used by the two. In order to compare, we help out the call to <code>NonlinearProblem</code> to indicate the problem is non-mutating by adding a “<code>false</code>”, as follows:</p>
<div id="14" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">BenchmarkTools</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="pp">@btime</span> <span class="fu">solve</span>(<span class="fu">NonlinearProblem</span><span class="dt">{false}</span>(f, <span class="pp">@SVector</span>[<span class="fl">1.0</span>]), <span class="fu">NewtonRaphson</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  326.782 ns (17 allocations: 1.92 KiB)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 1-element SVector{1, Float64} with indices SOneTo(1):
 1.1673039782614396</code></pre>
</div>
</div>
<p>As compared to:</p>
<div id="16" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Roots</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">ForwardDiff</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">g</span>(x) <span class="op">=</span> x<span class="op">^</span><span class="fl">5</span> <span class="op">-</span> x <span class="op">-</span> <span class="fl">1</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">gp</span>(x) <span class="op">=</span> ForwardDiff.<span class="fu">derivative</span>(g, x)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="pp">@btime</span> <span class="fu">solve</span>(Roots.<span class="fu">ZeroProblem</span>((g, gp), <span class="fl">1.0</span>), Roots.<span class="fu">Newton</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  127.800 ns (0 allocations: 0 bytes)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>1.1673039782614187</code></pre>
</div>
</div>
</div>
</div>
<p>This problem can also be solved using a bracketing method. The package has both <code>Bisection</code> and <code>Falsi</code> as possible methods. To use a bracketing method, the initial bracket must be specified.</p>
<div id="18" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>u0 <span class="op">=</span> (<span class="fl">1.0</span>, <span class="fl">2.0</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">IntervalNonlinearProblem</span>(f, u0)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div class="ansi-escaped-output">
<pre><span style="color:rgb(86,182,194)">IntervalNonlinearProblem</span> with uType <span style="color:rgb(86,182,194)">nothing</span>. In-place: <span style="color:rgb(86,182,194)">false</span>
Interval: (1.0, 2.0)</pre>
</div>
</div>
</div>
<p>And</p>
<div id="20" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(prob, <span class="fu">Bisection</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 1.1673039782615433</code></pre>
</div>
</div>
<hr>
<p>Incorporating parameters is readily done. For example to solve <span class="math inline">\(f(x) = \cos(x) - x/p\)</span> for different values of <span class="math inline">\(p\)</span> we might have:</p>
<div id="22" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(x, p) <span class="op">=</span> @. <span class="fu">cos</span>(x) <span class="op">-</span> x<span class="op">/</span>p</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>u0 <span class="op">=</span> (<span class="fl">0.0</span>, <span class="cn">pi</span><span class="op">/</span><span class="fl">2</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="fl">2.0</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">IntervalNonlinearProblem</span>(f, u0, p)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(prob, <span class="fu">Bisection</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 1.0298665293224118</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <em>insignificant</em> difference in stopping criteria used by <code>NonlinearSolve</code> and <code>Roots</code> is illustrated in this example, where the value returned by <code>NonlinearSolve</code> differs by one floating point value:</p>
<div id="24" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>an <span class="op">=</span> <span class="fu">solve</span>(<span class="fu">IntervalNonlinearProblem</span><span class="dt">{false}</span>(f, u0, p), <span class="fu">Bisection</span>())</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>ar <span class="op">=</span> <span class="fu">solve</span>(Roots.<span class="fu">ZeroProblem</span>(f, u0), Roots.<span class="fu">Bisection</span>(); p<span class="op">=</span>p)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nextfloat</span>(an[]) <span class="op">==</span> ar, <span class="fu">f</span>(an[], p), <span class="fu">f</span>(ar, p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(false, -2.077227279073668e-13, 0.0)</code></pre>
</div>
</div>
</div>
</div>
<p>We can solve for several parameters at once, by using a matching number of initial positions as follows:</p>
<div id="26" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>ps <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>]</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>u0 <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>]</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">NonlinearProblem</span>(f, u0, ps)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(prob, <span class="fu">NewtonRaphson</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 4-element Vector{Float64}:
 0.7390851332151607
 1.0298665293222589
 1.170120950002626
 1.2523532340025887</code></pre>
</div>
</div>
</section>
<section id="higher-dimensions" class="level3" data-number="68.2.3">
<h3 data-number="68.2.3" class="anchored" data-anchor-id="higher-dimensions"><span class="header-section-number">68.2.3</span> Higher dimensions</h3>
<p>We solve now for a point on the surface of the following <code>peaks</code> function where the gradient is <span class="math inline">\(0\)</span>. (The gradient here will be a vector-valued function from <span class="math inline">\(R^2\)</span> to <span class="math inline">\(R^2.\)</span>) First we define the function:</p>
<div id="28" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">_peaks</span>(x, y)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="fl">3</span> <span class="op">*</span> (<span class="fl">1</span> <span class="op">-</span> x)<span class="op">^</span><span class="fl">2</span> <span class="op">*</span> <span class="fu">exp</span>(<span class="op">-</span>x<span class="op">^</span><span class="fl">2</span> <span class="op">-</span> (y <span class="op">+</span> <span class="fl">1</span>)<span class="op">^</span><span class="fl">2</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    p <span class="op">-=</span> <span class="fl">10</span> <span class="op">*</span> (x <span class="op">/</span> <span class="fl">5</span> <span class="op">-</span> x<span class="op">^</span><span class="fl">3</span> <span class="op">-</span> y<span class="op">^</span><span class="fl">5</span>) <span class="op">*</span> <span class="fu">exp</span>(<span class="op">-</span>x<span class="op">^</span><span class="fl">2</span> <span class="op">-</span> y<span class="op">^</span><span class="fl">2</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    p <span class="op">-=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">3</span> <span class="op">*</span> <span class="fu">exp</span>(<span class="fu">-</span>(x <span class="op">+</span> <span class="fl">1</span>)<span class="op">^</span><span class="fl">2</span> <span class="op">-</span> y<span class="op">^</span><span class="fl">2</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    p</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="fu">peaks</span>(u) <span class="op">=</span> <span class="fu">_peaks</span>(u[<span class="fl">1</span>], u[<span class="fl">2</span>])  <span class="co"># pass container, take first two components</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>peaks (generic function with 1 method)</code></pre>
</div>
</div>
<p>The gradient can be computed different ways within <code>Julia</code>, but here we use the fact that the <code>ForwardDiff</code> package is loaded by <code>NonlinearSolve</code>. Once the function is defined, the pattern is similar to above. We provide a starting point, create a problem, then solve:</p>
<div id="30" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">∇peaks</span>(x, p<span class="op">=</span><span class="cn">nothing</span>) <span class="op">=</span> NonlinearSolve.ForwardDiff.<span class="fu">gradient</span>(peaks, x)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>u0 <span class="op">=</span> <span class="pp">@SVector</span>[<span class="fl">1.0</span>, <span class="fl">1.0</span>]</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">NonlinearProblem</span>(∇peaks, u0)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>u <span class="op">=</span> <span class="fu">solve</span>(prob, <span class="fu">NewtonRaphson</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 2-element SVector{2, Float64} with indices SOneTo(2):
 1.098272834335093
 0.8544609795247524</code></pre>
</div>
</div>
<p>We can see that this identified value is a “zero” through:</p>
<div id="32" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">∇peaks</span>(u.u)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>2-element SVector{2, Float64} with indices SOneTo(2):
 -8.257283745649602e-16
 -6.951904329977054e-16</code></pre>
</div>
</div>
</section>
<section id="using-modelingtoolkit-to-model-a-non-linear-problem" class="level3" data-number="68.2.4">
<h3 data-number="68.2.4" class="anchored" data-anchor-id="using-modelingtoolkit-to-model-a-non-linear-problem"><span class="header-section-number">68.2.4</span> Using <code>ModelingToolkit</code> to model a non-linear problem</h3>
<p>Nonlinear problems can also be approached symbolically using the <code>ModelingToolkit</code> package. There is one additional step necessary.</p>
<p>As an example, we look to solve numerically for the zeros of <span class="math inline">\(x^5-x-\alpha\)</span> for a parameter <span class="math inline">\(\alpha\)</span>. We can describe this equation as follows:</p>
<div id="34" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">ModelingToolkit</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="pp">@parameters</span> α</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>eq <span class="op">=</span> x<span class="op">^</span><span class="fl">5</span> <span class="op">-</span> x <span class="op">-</span> α <span class="op">~</span> <span class="fl">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>-x - α + x^5 ~ 0</code></pre>
</div>
</div>
<p>The extra step is to specify a “<code>NonlinearSystem</code>.” It is a system, as in practice one or more equations can be considered. The <code>NonlinearSystem</code>constructor handles the details where the equation, the variable, and the parameter are specified. Below this is done using vectors with just one element:</p>
<div id="36" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>ns <span class="op">=</span> <span class="fu">NonlinearSystem</span>([eq], [x], [α], name<span class="op">=:</span>ns);</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>ns <span class="op">=</span> <span class="fu">complete</span>(ns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div class="ansi-escaped-output">
<pre><span class="ansi-bold">Model ns:</span>
<span class="ansi-bold">Equations (1):</span>
  1 standard: see equations(ns)
<span class="ansi-bold">Unknowns (1):</span> see unknowns(ns)
  x
<span class="ansi-bold">Parameters (1):</span> see parameters(ns)
  α</pre>
</div>
</div>
</div>
<p>The <code>name</code> argument is special. The name of the object (<code>ns</code>) is assigned through <code>=</code>, but the system must also know this same name. However, the name on the left is not known when the name on the right is needed, so it is up to the user to keep them synchronized. The <code>@named</code> macro handles this behind the scenes by simply rewriting the syntax of the assignment:</p>
<div id="38" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@named</span> ns <span class="op">=</span> <span class="fu">NonlinearSystem</span>([eq], [x], [α]);</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>ns <span class="op">=</span> <span class="fu">complete</span>(ns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div class="ansi-escaped-output">
<pre><span class="ansi-bold">Model ns:</span>
<span class="ansi-bold">Equations (1):</span>
  1 standard: see equations(ns)
<span class="ansi-bold">Unknowns (1):</span> see unknowns(ns)
  x
<span class="ansi-bold">Parameters (1):</span> see parameters(ns)
  α</pre>
</div>
</div>
</div>
<p>With the system defined, we can pass this to <code>NonlinearProblem</code>, as was done with a function. The parameter is specified here, and in this case is <code>α =&gt; 1.0</code>. The initial guess is <code>[1.0]</code>:</p>
<div id="40" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">NonlinearProblem</span>(<span class="fu">mtkcompile</span>(ns), [<span class="fl">1.0</span>], <span class="fu">Dict</span>(α <span class="op">=&gt;</span> <span class="fl">1.0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<div class="ansi-escaped-output">
<pre><span class="ansi-yellow-fg ansi-bold">┌ </span><span class="ansi-yellow-fg ansi-bold">Warning: </span>`SciMLBase.NonlinearProblem(sys, u0, p; kw...)` is deprecated. Use `SciMLBase.NonlinearProblem(sys, merge(if isempty(u0)
<span class="ansi-yellow-fg ansi-bold">│ </span>    Dict()
<span class="ansi-yellow-fg ansi-bold">│ </span>else
<span class="ansi-yellow-fg ansi-bold">│ </span>    Dict(unknowns(sys) .=&gt; u0)
<span class="ansi-yellow-fg ansi-bold">│ </span>end, p))`
<span class="ansi-yellow-fg ansi-bold">│ </span>instead.
<span class="ansi-yellow-fg ansi-bold">└ </span><span class="ansi-bright-black-fg">@ ModelingToolkit ~/.julia/packages/ModelingToolkit/LHqZM/src/deprecations.jl:115</span>
</pre>
</div>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div class="ansi-escaped-output">
<pre><span style="color:rgb(86,182,194)">NonlinearProblem</span> with uType <span style="color:rgb(86,182,194)">Vector{Float64}</span>. In-place: <span style="color:rgb(86,182,194)">true</span>
u0: 1-element Vector{Float64}:
 1.0</pre>
</div>
</div>
</div>
<p>The problem is solved as before:</p>
<div id="42" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(prob, <span class="fu">NewtonRaphson</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 1-element Vector{Float64}:
 1.1673039782614396</code></pre>
</div>
</div>
</section>
</section>
<section id="optimization-optimization.jl" class="level2" data-number="68.3">
<h2 data-number="68.3" class="anchored" data-anchor-id="optimization-optimization.jl"><span class="header-section-number">68.3</span> Optimization (<code>Optimization.jl</code>)</h2>
<p>We describe briefly the <code>Optimization</code> package which provides a common interface to <em>numerous</em> optimization packages in the <code>Julia</code> ecosystem. We discuss only the interface for <code>Optim.jl</code> defined in <code>OptimizationOptimJL</code>.</p>
<p>We begin with a standard example from first semester calculus:</p>
<blockquote class="blockquote">
<p>Among all rectangles of fixed perimeter, find the one with the <em>maximum</em> area.</p>
</blockquote>
<p>If the perimeter is taken to be <span class="math inline">\(25\)</span>, the mathematical setup has a constraint (<span class="math inline">\(P=25=2x+2y\)</span>) and an objective (<span class="math inline">\(A=xy\)</span>) to maximize. In this case, the function to <em>maximize</em> is <span class="math inline">\(A(x) = x \cdot (25-2x)/2\)</span>. This is easily done different ways, such as finding the one critical point and identifying this as the point of maximum.</p>
<p>To do this last step using the <code>Optimization</code> package, we must first load the package <strong>and</strong> the underlying backend glue code we intend to use:</p>
<div id="44" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Optimization</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">OptimizationOptimJL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Our objective function is defined using an intermediate function derived from the constraint:</p>
<div id="46" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">height</span>(x) <span class="op">=</span> @. (<span class="fl">25</span> <span class="op">-</span> <span class="fl">2</span>x)<span class="op">/</span><span class="fl">2</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">A</span>(x, p<span class="op">=</span><span class="cn">nothing</span>) <span class="op">=</span> @.(<span class="op">-</span> x <span class="op">*</span> <span class="fu">height</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>A (generic function with 2 methods)</code></pre>
</div>
</div>
<p>The minus sign is needed here as optimization routines find <em>minimums</em>, not maximums.</p>
<p>Next, we define an optimization function with information on how its derivatives will be taken. The following uses <code>ForwardDiff</code>, which is a good choice in the typical calculus setting, where there are a small number of inputs (just <span class="math inline">\(1\)</span> here.)</p>
<div id="48" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>F <span class="op">=</span> <span class="fu">OptimizationFunction</span>(A, Optimization.<span class="fu">AutoForwardDiff</span>())</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>x0 <span class="op">=</span> [<span class="fl">4.0</span>]</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">OptimizationProblem</span>(F, x0)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div class="ansi-escaped-output">
<pre><span style="color:rgb(86,182,194)">OptimizationProblem</span>. In-place: <span style="color:rgb(86,182,194)">true</span>
u0: 1-element Vector{Float64}:
 4.0</pre>
</div>
</div>
</div>
<p>The problem is solved through the common interface with a specified method, in this case <code>NelderMead</code>:</p>
<div id="50" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>soln <span class="op">=</span> <span class="fu">solve</span>(prob, <span class="fu">NelderMead</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 1-element Vector{Float64}:
 6.249945068359375</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>We use the method <code>Newton</code> and not <code>NewtonRaphson</code>, as above. Both methods are similar, but they come from different packages – the latter for solving non-linear equation(s), the former for solving optimization problems.</p>
</div>
</div>
<p>The solution is an object containing the identified answer and more. To get the value, use index notation:</p>
<div id="52" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>soln[]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>6.249945068359375</code></pre>
</div>
</div>
<p>The corresponding <span class="math inline">\(y\)</span> value and area are found by:</p>
<div id="54" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>xstar <span class="op">=</span> soln[]</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">height</span>(xstar), <span class="fu">A</span>(xstar)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(6.250054931640625, -39.06249999698252)</code></pre>
</div>
</div>
<p>The <code>minimum</code> property also holds the identified minimum:</p>
<div id="56" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>soln.minimum  <span class="co"># compare with A(soln[], nothing)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>-39.06249999698252</code></pre>
</div>
</div>
<p>The package is a wrapper around other packages. The output of the underlying package is presented in the <code>original</code> property:</p>
<div id="58" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>soln.original</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code> * Status: success

 * Candidate solution
    Final objective value:     -3.906250e+01

 * Found with
    Algorithm:     Nelder-Mead

 * Convergence measures
    √(Σ(yᵢ-ȳ)²)/n ≤ 1.0e-08

 * Work counters
    Seconds run:   0  (vs limit Inf)
    Iterations:    9
    f(x) calls:    21</code></pre>
</div>
</div>
<hr>
<p>This problem can also be approached symbolically, using <code>ModelingToolkit</code>.</p>
<p>For example, we set up the problem with:</p>
<div id="60" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">ModelingToolkit</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="pp">@parameters</span> P</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> (P <span class="op">-</span> <span class="fl">2</span>x)<span class="op">/</span><span class="fl">2</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>Area <span class="op">=</span> <span class="op">-</span> x<span class="op">*</span>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(-1//2)*(P - 2x)*x</code></pre>
</div>
</div>
<p>The above should be self explanatory. To put into a form to pass to <code>solve</code> we define a “system” by specifying our objective function, the variables, and the parameters.</p>
<div id="62" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@named</span> sys <span class="op">=</span> <span class="fu">OptimizationSystem</span>(Area, [x], [P]);</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>sys <span class="op">=</span> <span class="fu">complete</span>(sys)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div class="ansi-escaped-output">
<pre><span class="ansi-bold">Model sys:</span>
<span class="ansi-bold">Unknowns (1):</span> see unknowns(sys)
  x
<span class="ansi-bold">Parameters (1):</span> see parameters(sys)
  P</pre>
</div>
</div>
</div>
<p>(This step is different, as before an <code>OptimizationFunction</code> was defined; we use <code>@named</code>, as above, to ensure the system has the same name as the identifier, <code>sys</code>.)</p>
<p>This system is passed to <code>OptimizationProblem</code> along with a specification of the initial condition (<span class="math inline">\(x=4\)</span>) and the perimeter (<span class="math inline">\(P=25\)</span>). A vector of pairs is used below:</p>
<div id="64" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">OptimizationProblem</span>(sys, [x <span class="op">=&gt;</span> <span class="fl">4.0</span>], [P <span class="op">=&gt;</span> <span class="fl">25.0</span>]; grad<span class="op">=</span><span class="cn">true</span>, hess<span class="op">=</span><span class="cn">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<div class="ansi-escaped-output">
<pre><span class="ansi-yellow-fg ansi-bold">┌ </span><span class="ansi-yellow-fg ansi-bold">Warning: </span>`SciMLBase.OptimizationProblem(sys, u0, p; kw...)` is deprecated. Use `SciMLBase.OptimizationProblem(sys, merge(Dict(u0), Dict(p)))`
<span class="ansi-yellow-fg ansi-bold">│ </span>instead.
<span class="ansi-yellow-fg ansi-bold">└ </span><span class="ansi-bright-black-fg">@ ModelingToolkit ~/.julia/packages/ModelingToolkit/LHqZM/src/deprecations.jl:115</span>
</pre>
</div>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div class="ansi-escaped-output">
<pre><span style="color:rgb(86,182,194)">OptimizationProblem</span>. In-place: <span style="color:rgb(86,182,194)">true</span>
u0: 1-element Vector{Float64}:
 4.0</pre>
</div>
</div>
</div>
<p>The keywords <code>grad=true</code> and <code>hess=true</code> instruct for automatic derivatives to be taken as needed. These are needed in the choice of method, <code>Newton</code>, below.</p>
<p>Solving this problem then follows the same pattern as before, again with <code>Newton</code> we have:</p>
<div id="66" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(prob, <span class="fu">Newton</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<div class="ansi-escaped-output">
<pre><span class="ansi-yellow-fg ansi-bold">┌ </span><span class="ansi-yellow-fg ansi-bold">Warning: </span>The selected optimization algorithm requires second order derivatives, but `SecondOrder` ADtype was not provided. 
<span class="ansi-yellow-fg ansi-bold">│ </span>        So a `SecondOrder` with SciMLBase.NoAD() for both inner and outer will be created, this can be suboptimal and not work in some cases so 
<span class="ansi-yellow-fg ansi-bold">│ </span>        an explicit `SecondOrder` ADtype is recommended.
<span class="ansi-yellow-fg ansi-bold">└ </span><span class="ansi-bright-black-fg">@ OptimizationBase ~/.julia/packages/OptimizationBase/1tTb9/src/cache.jl:49</span>
</pre>
</div>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 1-element Vector{Float64}:
 6.25</code></pre>
</div>
</div>
<p>(A derivative-free method like <code>NelderMead()</code> could be used and then the <code>grad</code> and <code>hess</code> keywords above would be unnecessary, though not harmful.)</p>
<hr>
<p>The related calculus problem:</p>
<blockquote class="blockquote">
<p>Among all rectangles with a fixed area, find the one with <em>minimum</em> perimeter</p>
</blockquote>
<p>could be similarly approached:</p>
<div id="68" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@parameters</span> Area</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> Area<span class="op">/</span>x  <span class="co"># from A = xy</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>P <span class="op">=</span> <span class="fl">2</span>x <span class="op">+</span> <span class="fl">2</span>y</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="pp">@named</span> sys <span class="op">=</span> <span class="fu">OptimizationSystem</span>(P, [x], [Area]);</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>sys <span class="op">=</span> <span class="fu">structural_simplify</span>(sys)</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>u0 <span class="op">=</span> [x <span class="op">=&gt;</span> <span class="fl">4.0</span>]</span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> [Area <span class="op">=&gt;</span> <span class="fl">25.0</span>]</span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">OptimizationProblem</span>(sys, u0, p; grad<span class="op">=</span><span class="cn">true</span>, hess<span class="op">=</span><span class="cn">true</span>)</span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>soln <span class="op">=</span> <span class="fu">solve</span>(prob, <span class="fu">LBFGS</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<div class="ansi-escaped-output">
<pre><span class="ansi-yellow-fg ansi-bold">┌ </span><span class="ansi-yellow-fg ansi-bold">Warning: </span>`SciMLBase.OptimizationProblem(sys, u0, p; kw...)` is deprecated. Use `SciMLBase.OptimizationProblem(sys, merge(Dict(u0), Dict(p)))`
<span class="ansi-yellow-fg ansi-bold">│ </span>instead.
<span class="ansi-yellow-fg ansi-bold">└ </span><span class="ansi-bright-black-fg">@ ModelingToolkit ~/.julia/packages/ModelingToolkit/LHqZM/src/deprecations.jl:115</span>
</pre>
</div>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 1-element Vector{Float64}:
 5.000000000274741</code></pre>
</div>
</div>
<p>We used an initial guess of <span class="math inline">\(x=4\)</span> above. The <code>LBFGS</code> method is a computationally efficient modification of the Broyden-Fletcher-Goldfarb-Shanno algorithm. It is a quasi-Newton method that updates an approximation to the Hessian using past approximations as well as the gradient. On this problem it performs similarly to <code>Newton</code>, though in general may be preferable for higher-dimensional problems.</p>
<section id="two-dimensional" class="level3" data-number="68.3.1">
<h3 data-number="68.3.1" class="anchored" data-anchor-id="two-dimensional"><span class="header-section-number">68.3.1</span> Two dimensional</h3>
<p>Scalar functions of two input variables can have their minimum value identified in the same manner using <code>Optimization.jl</code>.</p>
<p>For example, consider the function</p>
<p><span class="math display">\[
f(x,y) = (x + 2y - 7)^2 + (2x + y - 5)^2
\]</span></p>
<p>We wish to minimize this function.</p>
<p>We begin by defining a function in <code>Julia</code>:</p>
<div id="70" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">f</span>(u, p)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    x, y <span class="op">=</span> u</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>    (x <span class="op">+</span> <span class="fl">2</span>y <span class="op">-</span> <span class="fl">7</span>)<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> (<span class="fl">2</span>x <span class="op">+</span> y <span class="op">-</span> <span class="fl">5</span>)<span class="op">^</span><span class="fl">2</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>f (generic function with 1 method)</code></pre>
</div>
</div>
<p>We turn this into an optimization function by specifying how derivatives will be taken, as we will the <code>LBFGS</code> algorithm below:</p>
<div id="72" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>ff <span class="op">=</span> <span class="fu">OptimizationFunction</span>(f, Optimization.<span class="fu">AutoForwardDiff</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(::SciMLBase.OptimizationFunction{true, ADTypes.AutoForwardDiff{nothing, Nothing}, typeof(Main.Notebook.f), Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, typeof(SciMLBase.DEFAULT_OBSERVED_NO_TIME), Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing}) (generic function with 1 method)</code></pre>
</div>
</div>
<p>We will begin our search at the origin. We have to be mindful to use floating point numbers here:</p>
<div id="74" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>u0 <span class="op">=</span> [<span class="fl">0.0</span>, <span class="fl">0.0</span>] <span class="co"># or zeros(2)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>2-element Vector{Float64}:
 0.0
 0.0</code></pre>
</div>
</div>
<div id="76" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">OptimizationProblem</span>(ff, u0)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div class="ansi-escaped-output">
<pre><span style="color:rgb(86,182,194)">OptimizationProblem</span>. In-place: <span style="color:rgb(86,182,194)">true</span>
u0: 2-element Vector{Float64}:
 0.0
 0.0</pre>
</div>
</div>
</div>
<p>Finally, we solve the values:</p>
<div id="78" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(prob, <span class="fu">LBFGS</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 2-element Vector{Float64}:
 1.0000000000000004
 3.0</code></pre>
</div>
</div>
<p>The value of <span class="math inline">\((1, 3)\)</span> agrees with the contour graph, as it is a point in the interior of the contour for the smallest values displayed.</p>
<div id="80" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Plots</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>xs <span class="op">=</span> <span class="fu">range</span>(<span class="fl">0</span>, <span class="fl">2</span>, length<span class="op">=</span><span class="fl">100</span>)</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>ys <span class="op">=</span> <span class="fu">range</span>(<span class="fl">2</span>, <span class="fl">4</span>, length<span class="op">=</span><span class="fl">100</span>)</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="fu">contour</span>(xs, ys,  (x,y) <span class="op">-&gt;</span> <span class="fu">f</span>((x,y), <span class="cn">nothing</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<!--?xml version="1.0" encoding="utf-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="672" height="480" viewbox="0 0 2688 1920">
<defs>
  <clippath id="clip070">
    <rect x="0" y="0" width="2688" height="1920"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip070)" d="M0 1920 L2688 1920 L2688 -4.26326e-14 L0 -4.26326e-14  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip071">
    <rect x="537" y="0" width="1883" height="1883"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip070)" d="M159.802 1800.78 L2371.96 1800.78 L2371.96 47.2441 L159.802 47.2441  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip072">
    <rect x="159" y="47" width="2213" height="1755"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="159.802,1800.78 159.802,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="712.841,1800.78 712.841,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1265.88,1800.78 1265.88,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1818.92,1800.78 1818.92,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2371.96,1800.78 2371.96,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="159.802,1800.78 2371.96,1800.78 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="159.802,1362.4 2371.96,1362.4 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="159.802,924.012 2371.96,924.012 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="159.802,485.628 2371.96,485.628 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="159.802,47.2441 2371.96,47.2441 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="159.802,1800.78 2371.96,1800.78 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="159.802,1800.78 159.802,1781.88 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="712.841,1800.78 712.841,1781.88 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1265.88,1800.78 1265.88,1781.88 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1818.92,1800.78 1818.92,1781.88 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2371.96,1800.78 2371.96,1781.88 "></polyline>
<path clip-path="url(#clip070)" d="M137.187 1834 Q133.576 1834 131.747 1837.57 Q129.941 1841.11 129.941 1848.24 Q129.941 1855.34 131.747 1858.91 Q133.576 1862.45 137.187 1862.45 Q140.821 1862.45 142.626 1858.91 Q144.455 1855.34 144.455 1848.24 Q144.455 1841.11 142.626 1837.57 Q140.821 1834 137.187 1834 M137.187 1830.3 Q142.997 1830.3 146.052 1834.9 Q149.131 1839.49 149.131 1848.24 Q149.131 1856.96 146.052 1861.57 Q142.997 1866.15 137.187 1866.15 Q131.377 1866.15 128.298 1861.57 Q125.242 1856.96 125.242 1848.24 Q125.242 1839.49 128.298 1834.9 Q131.377 1830.3 137.187 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M157.349 1859.6 L162.233 1859.6 L162.233 1865.48 L157.349 1865.48 L157.349 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M182.418 1834 Q178.807 1834 176.978 1837.57 Q175.173 1841.11 175.173 1848.24 Q175.173 1855.34 176.978 1858.91 Q178.807 1862.45 182.418 1862.45 Q186.052 1862.45 187.858 1858.91 Q189.686 1855.34 189.686 1848.24 Q189.686 1841.11 187.858 1837.57 Q186.052 1834 182.418 1834 M182.418 1830.3 Q188.228 1830.3 191.284 1834.9 Q194.362 1839.49 194.362 1848.24 Q194.362 1856.96 191.284 1861.57 Q188.228 1866.15 182.418 1866.15 Q176.608 1866.15 173.529 1861.57 Q170.474 1856.96 170.474 1848.24 Q170.474 1839.49 173.529 1834.9 Q176.608 1830.3 182.418 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M690.723 1834 Q687.112 1834 685.283 1837.57 Q683.477 1841.11 683.477 1848.24 Q683.477 1855.34 685.283 1858.91 Q687.112 1862.45 690.723 1862.45 Q694.357 1862.45 696.163 1858.91 Q697.991 1855.34 697.991 1848.24 Q697.991 1841.11 696.163 1837.57 Q694.357 1834 690.723 1834 M690.723 1830.3 Q696.533 1830.3 699.588 1834.9 Q702.667 1839.49 702.667 1848.24 Q702.667 1856.96 699.588 1861.57 Q696.533 1866.15 690.723 1866.15 Q684.913 1866.15 681.834 1861.57 Q678.778 1856.96 678.778 1848.24 Q678.778 1839.49 681.834 1834.9 Q684.913 1830.3 690.723 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M710.885 1859.6 L715.769 1859.6 L715.769 1865.48 L710.885 1865.48 L710.885 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M726 1830.92 L744.357 1830.92 L744.357 1834.86 L730.283 1834.86 L730.283 1843.33 Q731.301 1842.98 732.32 1842.82 Q733.338 1842.64 734.357 1842.64 Q740.144 1842.64 743.523 1845.81 Q746.903 1848.98 746.903 1854.4 Q746.903 1859.97 743.431 1863.08 Q739.959 1866.15 733.639 1866.15 Q731.463 1866.15 729.195 1865.78 Q726.949 1865.41 724.542 1864.67 L724.542 1859.97 Q726.625 1861.11 728.848 1861.66 Q731.07 1862.22 733.547 1862.22 Q737.551 1862.22 739.889 1860.11 Q742.227 1858.01 742.227 1854.4 Q742.227 1850.78 739.889 1848.68 Q737.551 1846.57 733.547 1846.57 Q731.672 1846.57 729.797 1846.99 Q727.945 1847.4 726 1848.28 L726 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M1233.03 1861.55 L1240.67 1861.55 L1240.67 1835.18 L1232.36 1836.85 L1232.36 1832.59 L1240.62 1830.92 L1245.3 1830.92 L1245.3 1861.55 L1252.94 1861.55 L1252.94 1865.48 L1233.03 1865.48 L1233.03 1861.55 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M1262.38 1859.6 L1267.27 1859.6 L1267.27 1865.48 L1262.38 1865.48 L1262.38 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M1287.45 1834 Q1283.84 1834 1282.01 1837.57 Q1280.21 1841.11 1280.21 1848.24 Q1280.21 1855.34 1282.01 1858.91 Q1283.84 1862.45 1287.45 1862.45 Q1291.09 1862.45 1292.89 1858.91 Q1294.72 1855.34 1294.72 1848.24 Q1294.72 1841.11 1292.89 1837.57 Q1291.09 1834 1287.45 1834 M1287.45 1830.3 Q1293.26 1830.3 1296.32 1834.9 Q1299.4 1839.49 1299.4 1848.24 Q1299.4 1856.96 1296.32 1861.57 Q1293.26 1866.15 1287.45 1866.15 Q1281.64 1866.15 1278.56 1861.57 Q1275.51 1856.96 1275.51 1848.24 Q1275.51 1839.49 1278.56 1834.9 Q1281.64 1830.3 1287.45 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M1786.57 1861.55 L1794.21 1861.55 L1794.21 1835.18 L1785.9 1836.85 L1785.9 1832.59 L1794.16 1830.92 L1798.84 1830.92 L1798.84 1861.55 L1806.48 1861.55 L1806.48 1865.48 L1786.57 1865.48 L1786.57 1861.55 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M1815.92 1859.6 L1820.8 1859.6 L1820.8 1865.48 L1815.92 1865.48 L1815.92 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M1831.04 1830.92 L1849.39 1830.92 L1849.39 1834.86 L1835.32 1834.86 L1835.32 1843.33 Q1836.34 1842.98 1837.35 1842.82 Q1838.37 1842.64 1839.39 1842.64 Q1845.18 1842.64 1848.56 1845.81 Q1851.94 1848.98 1851.94 1854.4 Q1851.94 1859.97 1848.47 1863.08 Q1844.99 1866.15 1838.67 1866.15 Q1836.5 1866.15 1834.23 1865.78 Q1831.98 1865.41 1829.58 1864.67 L1829.58 1859.97 Q1831.66 1861.11 1833.88 1861.66 Q1836.1 1862.22 1838.58 1862.22 Q1842.59 1862.22 1844.92 1860.11 Q1847.26 1858.01 1847.26 1854.4 Q1847.26 1850.78 1844.92 1848.68 Q1842.59 1846.57 1838.58 1846.57 Q1836.71 1846.57 1834.83 1846.99 Q1832.98 1847.4 1831.04 1848.28 L1831.04 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2343.19 1861.55 L2359.51 1861.55 L2359.51 1865.48 L2337.57 1865.48 L2337.57 1861.55 Q2340.23 1858.79 2344.81 1854.16 Q2349.42 1849.51 2350.6 1848.17 Q2352.85 1845.65 2353.73 1843.91 Q2354.63 1842.15 2354.63 1840.46 Q2354.63 1837.71 2352.69 1835.97 Q2350.76 1834.23 2347.66 1834.23 Q2345.46 1834.23 2343.01 1835 Q2340.58 1835.76 2337.8 1837.31 L2337.8 1832.59 Q2340.63 1831.46 2343.08 1830.88 Q2345.53 1830.3 2347.57 1830.3 Q2352.94 1830.3 2356.13 1832.98 Q2359.33 1835.67 2359.33 1840.16 Q2359.33 1842.29 2358.52 1844.21 Q2357.73 1846.11 2355.62 1848.7 Q2355.05 1849.37 2351.94 1852.59 Q2348.84 1855.78 2343.19 1861.55 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2369.33 1859.6 L2374.21 1859.6 L2374.21 1865.48 L2369.33 1865.48 L2369.33 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2394.4 1834 Q2390.79 1834 2388.96 1837.57 Q2387.15 1841.11 2387.15 1848.24 Q2387.15 1855.34 2388.96 1858.91 Q2390.79 1862.45 2394.4 1862.45 Q2398.03 1862.45 2399.84 1858.91 Q2401.67 1855.34 2401.67 1848.24 Q2401.67 1841.11 2399.84 1837.57 Q2398.03 1834 2394.4 1834 M2394.4 1830.3 Q2400.21 1830.3 2403.26 1834.9 Q2406.34 1839.49 2406.34 1848.24 Q2406.34 1856.96 2403.26 1861.57 Q2400.21 1866.15 2394.4 1866.15 Q2388.59 1866.15 2385.51 1861.57 Q2382.45 1856.96 2382.45 1848.24 Q2382.45 1839.49 2385.51 1834.9 Q2388.59 1830.3 2394.4 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="159.802,1800.78 159.802,47.2441 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="159.802,1800.78 176.652,1800.78 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="159.802,1362.4 176.652,1362.4 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="159.802,924.012 176.652,924.012 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="159.802,485.628 176.652,485.628 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="159.802,47.2441 176.652,47.2441 "></polyline>
<path clip-path="url(#clip070)" d="M56.3345 1814.12 L72.6539 1814.12 L72.6539 1818.06 L50.7095 1818.06 L50.7095 1814.12 Q53.3715 1811.37 57.9549 1806.74 Q62.5613 1802.09 63.7419 1800.74 Q65.9872 1798.22 66.8668 1796.49 Q67.7696 1794.73 67.7696 1793.04 Q67.7696 1790.28 65.8252 1788.55 Q63.9039 1786.81 60.8021 1786.81 Q58.603 1786.81 56.1493 1787.57 Q53.7188 1788.34 50.941 1789.89 L50.941 1785.17 Q53.7651 1784.03 56.2188 1783.45 Q58.6724 1782.87 60.7095 1782.87 Q66.0798 1782.87 69.2742 1785.56 Q72.4687 1788.24 72.4687 1792.74 Q72.4687 1794.86 71.6585 1796.79 Q70.8715 1798.68 68.765 1801.28 Q68.1863 1801.95 65.0845 1805.17 Q61.9826 1808.36 56.3345 1814.12 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M82.4686 1812.18 L87.3528 1812.18 L87.3528 1818.06 L82.4686 1818.06 L82.4686 1812.18 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M107.538 1786.58 Q103.927 1786.58 102.098 1790.14 Q100.293 1793.68 100.293 1800.81 Q100.293 1807.92 102.098 1811.49 Q103.927 1815.03 107.538 1815.03 Q111.172 1815.03 112.978 1811.49 Q114.806 1807.92 114.806 1800.81 Q114.806 1793.68 112.978 1790.14 Q111.172 1786.58 107.538 1786.58 M107.538 1782.87 Q113.348 1782.87 116.404 1787.48 Q119.482 1792.06 119.482 1800.81 Q119.482 1809.54 116.404 1814.15 Q113.348 1818.73 107.538 1818.73 Q101.728 1818.73 98.6491 1814.15 Q95.5935 1809.54 95.5935 1800.81 Q95.5935 1792.06 98.6491 1787.48 Q101.728 1782.87 107.538 1782.87 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M57.3299 1375.74 L73.6492 1375.74 L73.6492 1379.68 L51.7049 1379.68 L51.7049 1375.74 Q54.3669 1372.99 58.9502 1368.36 Q63.5567 1363.7 64.7372 1362.36 Q66.9826 1359.84 67.8622 1358.1 Q68.765 1356.34 68.765 1354.65 Q68.765 1351.9 66.8206 1350.16 Q64.8993 1348.43 61.7974 1348.43 Q59.5984 1348.43 57.1447 1349.19 Q54.7141 1349.95 51.9364 1351.5 L51.9364 1346.78 Q54.7604 1345.65 57.2141 1345.07 Q59.6678 1344.49 61.7048 1344.49 Q67.0752 1344.49 70.2696 1347.18 Q73.464 1349.86 73.464 1354.35 Q73.464 1356.48 72.6539 1358.4 Q71.8668 1360.3 69.7604 1362.89 Q69.1817 1363.56 66.0798 1366.78 Q62.978 1369.98 57.3299 1375.74 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M83.464 1373.8 L88.3482 1373.8 L88.3482 1379.68 L83.464 1379.68 L83.464 1373.8 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M98.5796 1345.12 L116.936 1345.12 L116.936 1349.05 L102.862 1349.05 L102.862 1357.52 Q103.881 1357.18 104.899 1357.01 Q105.918 1356.83 106.936 1356.83 Q112.723 1356.83 116.103 1360 Q119.482 1363.17 119.482 1368.59 Q119.482 1374.17 116.01 1377.27 Q112.538 1380.35 106.218 1380.35 Q104.043 1380.35 101.774 1379.98 Q99.5287 1379.61 97.1213 1378.87 L97.1213 1374.17 Q99.2046 1375.3 101.427 1375.86 Q103.649 1376.41 106.126 1376.41 Q110.131 1376.41 112.468 1374.31 Q114.806 1372.2 114.806 1368.59 Q114.806 1364.98 112.468 1362.87 Q110.131 1360.76 106.126 1360.76 Q104.251 1360.76 102.376 1361.18 Q100.524 1361.6 98.5796 1362.48 L98.5796 1345.12 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M66.4733 922.658 Q69.8298 923.375 71.7048 925.644 Q73.6029 927.912 73.6029 931.245 Q73.6029 936.361 70.0844 939.162 Q66.5659 941.963 60.0845 941.963 Q57.9086 941.963 55.5938 941.523 Q53.3021 941.107 50.8484 940.25 L50.8484 935.736 Q52.7928 936.87 55.1077 937.449 Q57.4225 938.028 59.9456 938.028 Q64.3437 938.028 66.6354 936.292 Q68.9502 934.556 68.9502 931.245 Q68.9502 928.19 66.7974 926.477 Q64.6678 924.741 60.8484 924.741 L56.8206 924.741 L56.8206 920.898 L61.0335 920.898 Q64.4826 920.898 66.3113 919.533 Q68.14 918.144 68.14 915.551 Q68.14 912.889 66.2419 911.477 Q64.3669 910.042 60.8484 910.042 Q58.9271 910.042 56.728 910.459 Q54.529 910.875 51.8901 911.755 L51.8901 907.588 Q54.5521 906.847 56.8669 906.477 Q59.2049 906.107 61.265 906.107 Q66.5891 906.107 69.6909 908.537 Q72.7927 910.945 72.7927 915.065 Q72.7927 917.935 71.1492 919.926 Q69.5057 921.894 66.4733 922.658 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M82.4686 935.412 L87.3528 935.412 L87.3528 941.292 L82.4686 941.292 L82.4686 935.412 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M107.538 909.81 Q103.927 909.81 102.098 913.375 Q100.293 916.917 100.293 924.046 Q100.293 931.153 102.098 934.718 Q103.927 938.259 107.538 938.259 Q111.172 938.259 112.978 934.718 Q114.806 931.153 114.806 924.046 Q114.806 916.917 112.978 913.375 Q111.172 909.81 107.538 909.81 M107.538 906.107 Q113.348 906.107 116.404 910.713 Q119.482 915.296 119.482 924.046 Q119.482 932.773 116.404 937.38 Q113.348 941.963 107.538 941.963 Q101.728 941.963 98.6491 937.38 Q95.5935 932.773 95.5935 924.046 Q95.5935 915.296 98.6491 910.713 Q101.728 906.107 107.538 906.107 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M67.4687 484.274 Q70.8252 484.991 72.7002 487.26 Q74.5983 489.528 74.5983 492.862 Q74.5983 497.977 71.0798 500.778 Q67.5613 503.579 61.0798 503.579 Q58.9039 503.579 56.5891 503.139 Q54.2975 502.723 51.8438 501.866 L51.8438 497.352 Q53.7882 498.487 56.103 499.065 Q58.4178 499.644 60.941 499.644 Q65.3391 499.644 67.6307 497.908 Q69.9455 496.172 69.9455 492.862 Q69.9455 489.806 67.7928 488.093 Q65.6632 486.357 61.8437 486.357 L57.816 486.357 L57.816 482.514 L62.0289 482.514 Q65.478 482.514 67.3067 481.149 Q69.1354 479.76 69.1354 477.167 Q69.1354 474.505 67.2372 473.093 Q65.3622 471.658 61.8437 471.658 Q59.9224 471.658 57.7234 472.075 Q55.5243 472.491 52.8854 473.371 L52.8854 469.204 Q55.5475 468.464 57.8623 468.093 Q60.2002 467.723 62.2604 467.723 Q67.5844 467.723 70.6863 470.153 Q73.7881 472.561 73.7881 476.681 Q73.7881 479.552 72.1446 481.542 Q70.5011 483.51 67.4687 484.274 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M83.464 497.028 L88.3482 497.028 L88.3482 502.908 L83.464 502.908 L83.464 497.028 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M98.5796 468.348 L116.936 468.348 L116.936 472.283 L102.862 472.283 L102.862 480.755 Q103.881 480.408 104.899 480.246 Q105.918 480.061 106.936 480.061 Q112.723 480.061 116.103 483.232 Q119.482 486.403 119.482 491.82 Q119.482 497.399 116.01 500.501 Q112.538 503.579 106.218 503.579 Q104.043 503.579 101.774 503.209 Q99.5287 502.838 97.1213 502.098 L97.1213 497.399 Q99.2046 498.533 101.427 499.088 Q103.649 499.644 106.126 499.644 Q110.131 499.644 112.468 497.538 Q114.806 495.431 114.806 491.82 Q114.806 488.209 112.468 486.102 Q110.131 483.996 106.126 483.996 Q104.251 483.996 102.376 484.413 Q100.524 484.829 98.5796 485.709 L98.5796 468.348 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M65.1539 34.0381 L53.3484 52.4871 L65.1539 52.4871 L65.1539 34.0381 M63.927 29.9641 L69.8066 29.9641 L69.8066 52.4871 L74.7372 52.4871 L74.7372 56.376 L69.8066 56.376 L69.8066 64.5241 L65.1539 64.5241 L65.1539 56.376 L49.5521 56.376 L49.5521 51.8621 L63.927 29.9641 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M82.4686 58.6445 L87.3528 58.6445 L87.3528 64.5241 L82.4686 64.5241 L82.4686 58.6445 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M107.538 33.0428 Q103.927 33.0428 102.098 36.6076 Q100.293 40.1492 100.293 47.2788 Q100.293 54.3853 102.098 57.9501 Q103.927 61.4917 107.538 61.4917 Q111.172 61.4917 112.978 57.9501 Q114.806 54.3853 114.806 47.2788 Q114.806 40.1492 112.978 36.6076 Q111.172 33.0428 107.538 33.0428 M107.538 29.3391 Q113.348 29.3391 116.404 33.9456 Q119.482 38.5289 119.482 47.2788 Q119.482 56.0056 116.404 60.6121 Q113.348 65.1954 107.538 65.1954 Q101.728 65.1954 98.6491 60.6121 Q95.5935 56.0056 95.5935 47.2788 Q95.5935 38.5289 98.6491 33.9456 Q101.728 29.3391 107.538 29.3391 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip072)" style="stroke:#f1e864; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="230.192,1800.78 226.837,1798.14 207.735,1783.07 204.492,1780.5 185.382,1765.35 182.147,1762.78 163.133,1747.64 159.802,1744.98 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#f8c931; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="159.802,1687.06 169.055,1694.5 182.147,1705.01 191.155,1712.22 204.492,1722.87 213.361,1729.93 226.837,1740.64 235.673,1747.64 249.182,1758.32 258.093,1765.35 271.527,1775.93 280.622,1783.07 293.872,1793.44 303.259,1800.78 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#fbaa0e; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="379.308,1800.78 360.907,1786.52 356.469,1783.07 338.562,1769.12 333.744,1765.35 316.217,1751.63 311.132,1747.64 293.872,1734.06 288.633,1729.93 271.527,1716.4 266.246,1712.22 249.182,1698.66 243.969,1694.5 226.837,1680.82 221.803,1676.79 204.492,1662.9 199.745,1659.08 182.147,1644.89 177.796,1641.37 159.802,1626.78 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#f98c09; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="159.802,1563.77 168.032,1570.52 182.147,1582.06 189.71,1588.23 204.492,1600.26 211.5,1605.94 226.837,1618.35 233.403,1623.65 249.182,1636.36 255.418,1641.37 271.527,1654.27 277.548,1659.08 293.872,1672.09 299.792,1676.79 316.217,1689.81 322.153,1694.5 338.562,1707.44 344.63,1712.22 360.907,1724.99 367.225,1729.93 383.252,1742.44 389.938,1747.64 405.597,1759.8 412.771,1765.35 427.942,1777.07 435.725,1783.07 450.287,1794.26 458.799,1800.78 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#f0701e; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="542.179,1800.78 539.667,1798.88 518.831,1783.07 517.322,1781.92 495.613,1765.35 494.977,1764.87 472.632,1747.72 472.525,1747.64 450.287,1730.48 449.572,1729.93 427.942,1713.15 426.743,1712.22 405.597,1695.72 404.038,1694.5 383.252,1678.2 381.456,1676.79 360.907,1660.59 358.995,1659.08 338.562,1642.88 336.655,1641.37 316.217,1625.08 314.435,1623.65 293.872,1607.18 292.334,1605.94 271.527,1589.18 270.35,1588.23 249.182,1571.08 248.484,1570.52 226.837,1552.89 226.734,1552.8 205.106,1535.09 204.492,1534.59 183.596,1517.38 182.147,1516.18 162.201,1499.67 159.802,1497.68 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#e35832; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="159.802,1427.95 160.829,1428.82 181.932,1446.53 182.147,1446.71 203.165,1464.24 204.492,1465.35 224.516,1481.95 226.837,1483.87 245.986,1499.67 249.182,1502.3 267.575,1517.38 271.527,1520.61 289.285,1535.09 293.872,1538.82 311.116,1552.8 316.217,1556.93 333.07,1570.52 338.562,1574.93 355.148,1588.23 360.907,1592.83 377.35,1605.94 383.252,1610.63 399.679,1623.65 405.597,1628.33 422.134,1641.37 427.942,1645.93 444.717,1659.08 450.287,1663.43 467.429,1676.79 472.632,1680.84 490.271,1694.5 494.977,1698.14 513.245,1712.22 517.322,1715.35 536.351,1729.93 539.667,1732.46 559.59,1747.64 562.012,1749.48 582.965,1765.35 584.357,1766.41 606.475,1783.07 606.702,1783.24 629.047,1799.97 630.138,1800.78 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#d04544; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="723.539,1800.78 718.427,1797.02 699.497,1783.07 696.082,1780.54 675.605,1765.35 673.737,1763.96 651.862,1747.64 651.392,1747.29 629.047,1730.51 628.278,1729.93 606.702,1713.62 604.846,1712.22 584.357,1696.64 581.555,1694.5 562.012,1679.56 558.406,1676.79 539.667,1662.37 535.397,1659.08 517.322,1645.09 512.527,1641.37 494.977,1627.7 489.793,1623.65 472.632,1610.21 467.196,1605.94 450.287,1592.62 444.734,1588.23 427.942,1574.92 422.406,1570.52 405.597,1557.11 400.21,1552.8 383.252,1539.2 378.145,1535.09 360.907,1521.18 356.211,1517.38 338.562,1503.05 334.405,1499.67 316.217,1484.81 312.728,1481.95 293.872,1466.46 291.177,1464.24 271.527,1448 269.752,1446.53 249.182,1429.43 248.451,1428.82 227.281,1411.1 226.837,1410.73 206.245,1393.39 204.492,1391.91 185.332,1375.68 182.147,1372.97 164.542,1357.97 159.802,1353.92 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#ba3655; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="159.802,1274.69 174.084,1287.12 182.147,1294.11 194.554,1304.83 204.492,1313.39 215.149,1322.54 226.837,1332.55 235.872,1340.25 249.182,1351.57 256.723,1357.97 271.527,1370.48 277.703,1375.68 293.872,1389.26 298.815,1393.39 316.217,1407.91 320.058,1411.1 338.562,1426.44 341.434,1428.82 360.907,1444.86 362.945,1446.53 383.252,1463.15 384.591,1464.24 405.597,1481.32 406.375,1481.95 427.942,1499.38 428.297,1499.67 450.287,1517.32 450.358,1517.38 472.562,1535.09 472.632,1535.15 494.907,1552.8 494.977,1552.86 517.322,1570.46 517.394,1570.52 539.667,1587.95 540.027,1588.23 562.012,1605.33 562.808,1605.94 584.357,1622.59 585.735,1623.65 606.702,1639.75 608.813,1641.37 629.047,1656.8 632.041,1659.08 651.392,1673.75 655.421,1676.79 673.737,1690.59 678.956,1694.5 696.082,1707.32 702.645,1712.22 718.427,1723.95 726.492,1729.93 740.772,1740.48 750.497,1747.64 763.117,1756.91 774.662,1765.35 785.462,1773.23 798.988,1783.07 807.807,1789.46 823.478,1800.78 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#a12b61; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="931.584,1800.78 919.532,1792.28 906.504,1783.07 897.187,1776.45 881.606,1765.35 874.842,1760.52 856.889,1747.64 852.497,1744.48 832.35,1729.93 830.152,1728.34 807.988,1712.22 807.807,1712.08 785.462,1695.71 783.829,1694.5 763.117,1679.22 759.844,1676.79 740.772,1662.62 736.026,1659.08 718.427,1645.91 712.374,1641.37 696.082,1629.09 688.886,1623.65 673.737,1612.16 665.561,1605.94 651.392,1595.12 642.396,1588.23 629.047,1577.97 619.391,1570.52 606.702,1560.7 596.543,1552.8 584.357,1543.31 573.852,1535.09 562.012,1525.8 551.315,1517.38 539.667,1508.18 528.93,1499.67 517.322,1490.43 506.697,1481.95 494.977,1472.57 484.613,1464.24 472.632,1454.58 462.678,1446.53 450.287,1436.47 440.89,1428.82 427.942,1418.24 419.246,1411.1 405.597,1399.87 397.747,1393.39 383.252,1381.38 376.39,1375.68 360.907,1362.77 355.173,1357.97 338.562,1344.02 334.097,1340.25 316.217,1325.14 313.159,1322.54 293.872,1306.12 292.357,1304.83 271.694,1287.12 271.527,1286.97 251.192,1269.4 249.182,1267.66 230.825,1251.69 226.837,1248.21 210.591,1233.98 204.492,1228.62 190.49,1216.27 182.147,1208.88 170.52,1198.56 159.802,1189 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#88216a; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="159.802,1094.96 176.191,1109.99 182.147,1115.43 195.625,1127.71 204.492,1135.75 215.194,1145.42 226.837,1155.9 234.902,1163.13 249.182,1175.89 254.749,1180.84 271.527,1195.72 274.736,1198.56 293.872,1215.4 294.866,1216.27 315.159,1233.98 316.217,1234.9 335.612,1251.69 338.562,1254.24 356.209,1269.4 360.907,1273.43 376.953,1287.12 383.252,1292.47 397.844,1304.83 405.597,1311.37 418.884,1322.54 427.942,1330.13 440.076,1340.25 450.287,1348.74 461.419,1357.97 472.632,1367.22 482.917,1375.68 494.977,1385.56 504.571,1393.39 517.322,1403.76 526.382,1411.1 539.667,1421.83 548.352,1428.82 562.012,1439.77 570.484,1446.53 584.357,1457.57 592.777,1464.24 606.702,1475.24 615.236,1481.95 629.047,1492.78 637.861,1499.67 651.392,1510.2 660.654,1517.38 673.737,1527.49 683.617,1535.09 696.082,1544.65 706.752,1552.8 718.427,1561.69 730.061,1570.52 740.772,1578.61 753.547,1588.23 763.117,1595.41 777.21,1605.94 785.462,1612.09 801.052,1623.65 807.807,1628.65 825.077,1641.37 830.152,1645.09 849.286,1659.08 852.497,1661.42 873.682,1676.79 874.842,1677.63 897.187,1693.72 898.286,1694.5 919.532,1709.67 923.109,1712.22 941.877,1725.52 948.128,1729.93 964.222,1741.25 973.347,1747.64 986.567,1756.87 998.767,1765.35 1008.91,1772.38 1024.39,1783.07 1031.26,1787.79 1050.22,1800.78 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#6e186e; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1183.34,1800.78 1165.33,1788.94 1156.42,1783.07 1142.98,1774.16 1129.75,1765.35 1120.64,1759.26 1103.32,1747.64 1098.29,1744.25 1077.13,1729.93 1075.95,1729.13 1053.6,1713.85 1051.23,1712.22 1031.26,1698.44 1025.57,1694.5 1008.91,1682.92 1000.14,1676.79 986.567,1667.27 974.935,1659.08 964.222,1651.51 949.943,1641.37 941.877,1635.62 925.166,1623.65 919.532,1619.61 900.601,1605.94 897.187,1603.47 876.244,1588.23 874.842,1587.21 852.497,1570.81 852.103,1570.52 830.152,1554.26 828.19,1552.8 807.807,1537.59 804.474,1535.09 785.462,1520.79 780.952,1517.38 763.117,1503.85 757.622,1499.67 740.772,1486.78 734.482,1481.95 718.427,1469.58 711.529,1464.24 696.082,1452.24 688.761,1446.53 673.737,1434.76 666.176,1428.82 651.392,1417.14 643.772,1411.1 629.047,1399.39 621.547,1393.39 606.702,1381.48 599.498,1375.68 584.357,1363.44 577.623,1357.97 562.012,1345.24 555.92,1340.25 539.667,1326.9 534.388,1322.54 517.322,1308.41 513.023,1304.83 494.977,1289.76 491.825,1287.12 472.632,1270.96 470.792,1269.4 450.287,1252 449.92,1251.69 429.235,1233.98 427.942,1232.87 408.718,1216.27 405.597,1213.56 388.36,1198.56 383.252,1194.09 368.161,1180.84 360.907,1174.45 348.117,1163.13 338.562,1154.64 328.228,1145.42 316.217,1134.66 308.491,1127.71 293.872,1114.5 288.904,1109.99 271.527,1094.16 269.467,1092.28 250.196,1074.57 249.182,1073.63 231.113,1056.86 226.837,1052.87 212.176,1039.14 204.492,1031.92 193.384,1021.43 182.147,1010.77 174.734,1003.72 159.802,989.438 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#550f6d; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="159.802,866.858 172.449,879.731 182.147,889.549 189.978,897.443 204.492,911.996 207.657,915.155 225.517,932.868 226.837,934.166 243.596,950.58 249.182,956.023 261.829,968.293 271.527,977.654 280.217,986.005 293.872,999.061 298.763,1003.72 316.217,1020.25 317.469,1021.43 336.385,1039.14 338.562,1041.17 355.487,1056.86 360.907,1061.85 374.753,1074.57 383.252,1082.33 394.185,1092.28 405.597,1102.61 413.784,1109.99 427.942,1122.69 433.553,1127.71 450.287,1142.58 453.493,1145.42 472.632,1162.27 473.608,1163.13 493.922,1180.84 494.977,1181.76 514.433,1198.56 517.322,1201.04 535.121,1216.27 539.667,1220.14 555.989,1233.98 562.012,1239.06 577.039,1251.69 584.357,1257.81 598.274,1269.4 606.702,1276.39 619.696,1287.12 629.047,1294.8 641.307,1304.83 651.392,1313.04 663.111,1322.54 673.737,1331.12 685.109,1340.25 696.082,1349.03 707.305,1357.97 718.427,1366.78 729.7,1375.68 740.772,1384.38 752.298,1393.39 763.117,1401.82 775.102,1411.1 785.462,1419.1 798.114,1428.82 807.807,1436.23 821.337,1446.53 830.152,1453.21 844.774,1464.24 852.497,1470.04 868.428,1481.95 874.842,1486.73 892.302,1499.67 897.187,1503.27 916.399,1517.38 919.532,1519.67 940.723,1535.09 941.877,1535.93 964.222,1552.03 965.301,1552.8 986.567,1567.98 990.146,1570.52 1008.91,1583.78 1015.23,1588.23 1031.26,1599.45 1040.57,1605.94 1053.6,1614.99 1066.15,1623.65 1075.95,1630.39 1091.99,1641.37 1098.29,1645.66 1118.08,1659.08 1120.64,1660.81 1142.98,1675.8 1144.47,1676.79 1165.33,1690.63 1171.2,1694.5 1187.67,1705.33 1198.21,1712.22 1210.02,1719.9 1225.5,1729.93 1232.36,1734.36 1253.07,1747.64 1254.71,1748.69 1277.05,1762.85 1281.04,1765.35 1299.4,1776.86 1309.35,1783.07 1321.74,1790.75 1337.98,1800.78 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#3b0964; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1530.01,1800.78 1522.85,1796.84 1500.5,1784.44 1498.06,1783.07 1478.16,1771.82 1466.79,1765.35 1455.81,1759.08 1435.95,1747.64 1433.47,1746.2 1411.12,1733.12 1405.72,1729.93 1388.78,1719.87 1375.96,1712.22 1366.43,1706.5 1346.59,1694.5 1344.09,1692.98 1321.74,1679.28 1317.73,1676.79 1299.4,1665.4 1289.3,1659.08 1277.05,1651.38 1261.22,1641.37 1254.71,1637.22 1233.49,1623.65 1232.36,1622.93 1210.02,1608.43 1206.22,1605.94 1187.67,1593.76 1179.29,1588.23 1165.33,1578.96 1152.68,1570.52 1142.98,1564.01 1126.39,1552.8 1120.64,1548.91 1100.39,1535.09 1098.29,1533.65 1075.95,1518.23 1074.73,1517.38 1053.6,1502.61 1049.41,1499.67 1031.26,1486.84 1024.37,1481.95 1008.91,1470.92 999.612,1464.24 986.567,1454.83 975.12,1446.53 964.222,1438.59 950.894,1428.82 941.877,1422.18 926.93,1411.1 919.532,1405.6 903.224,1393.39 897.187,1388.85 879.771,1375.68 874.842,1371.93 856.568,1357.97 852.497,1354.84 833.61,1340.25 830.152,1337.57 810.894,1322.54 807.807,1320.12 788.416,1304.83 785.462,1302.49 766.172,1287.12 763.117,1284.67 744.158,1269.4 740.772,1266.66 722.372,1251.69 718.427,1248.47 700.809,1233.98 696.082,1230.07 679.466,1216.27 673.737,1211.48 658.339,1198.56 651.392,1192.69 637.426,1180.84 629.047,1173.7 616.724,1163.13 606.702,1154.49 596.228,1145.42 584.357,1135.08 575.936,1127.71 562.012,1115.45 555.845,1109.99 539.667,1095.6 535.952,1092.28 517.322,1075.53 516.254,1074.57 496.793,1056.86 494.977,1055.19 477.551,1039.14 472.632,1034.59 458.501,1021.43 450.287,1013.74 439.637,1003.72 427.942,992.648 420.959,986.005 405.597,971.306 402.463,968.293 384.169,950.58 383.252,949.684 366.134,932.868 360.907,927.702 348.276,915.155 338.562,905.447 330.594,897.443 316.217,882.913 313.083,879.731 295.79,862.018 293.872,860.034 278.745,844.306 271.527,836.752 261.868,826.593 249.182,813.163 245.157,808.881 228.653,791.168 226.837,789.197 212.413,773.456 204.492,764.752 196.334,755.743 182.147,739.968 180.414,738.031 164.771,720.318 159.802,714.639 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#1f0c47; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="159.802,485.567 162.614,490.056 174.082,507.768 182.147,519.988 185.797,525.481 197.89,543.193 204.492,552.675 210.261,560.906 222.923,578.618 226.837,583.971 235.933,596.331 249.112,614.043 249.182,614.135 262.744,631.756 271.527,643.052 276.548,649.468 290.631,667.181 293.872,671.183 305.045,684.893 316.217,698.473 319.639,702.606 334.543,720.318 338.562,725.026 349.735,738.031 360.907,750.92 365.114,755.743 380.762,773.456 383.252,776.233 396.727,791.168 405.597,800.917 412.887,808.881 427.942,825.191 429.244,826.593 445.939,844.306 450.287,848.874 462.873,862.018 472.632,872.129 480.013,879.731 494.977,895.021 497.361,897.443 514.994,915.155 517.322,917.469 532.91,932.868 539.667,939.494 551.041,950.58 562.012,961.195 569.393,968.293 584.357,982.579 587.968,986.005 606.702,1003.65 606.771,1003.72 625.903,1021.43 629.047,1024.32 645.267,1039.14 651.392,1044.7 664.867,1056.86 673.737,1064.8 684.705,1074.57 696.082,1084.63 704.787,1092.28 718.427,1104.19 725.117,1109.99 740.772,1123.49 745.699,1127.71 763.117,1142.52 766.539,1145.42 785.462,1161.31 787.64,1163.13 807.807,1179.85 809.009,1180.84 830.152,1198.15 830.65,1198.56 852.497,1216.21 852.568,1216.27 874.772,1233.98 874.842,1234.04 897.187,1251.64 897.259,1251.69 919.532,1269.01 920.043,1269.4 941.877,1286.16 943.126,1287.12 964.222,1303.1 966.515,1304.83 986.567,1319.83 990.216,1322.54 1008.91,1336.35 1014.24,1340.25 1031.26,1352.66 1038.58,1357.97 1053.6,1368.78 1063.25,1375.68 1075.95,1384.7 1088.27,1393.39 1098.29,1400.42 1113.62,1411.1 1120.64,1415.96 1139.34,1428.82 1142.98,1431.31 1165.33,1446.48 1165.41,1446.53 1187.67,1461.38 1191.99,1464.24 1210.02,1476.1 1218.97,1481.95 1232.36,1490.65 1246.35,1499.67 1254.71,1505.02 1274.13,1517.38 1277.05,1519.22 1299.4,1533.2 1302.45,1535.09 1321.74,1546.95 1331.33,1552.8 1344.09,1560.54 1360.67,1570.52 1366.43,1573.96 1388.78,1587.2 1390.55,1588.23 1411.12,1600.16 1421.17,1605.94 1433.47,1612.97 1452.31,1623.65 1455.81,1625.63 1478.16,1638.03 1484.24,1641.37 1500.5,1650.22 1516.91,1659.08 1522.85,1662.27 1545.19,1674.08 1550.41,1676.79 1567.54,1685.65 1584.83,1694.5 1589.88,1697.07 1612.23,1708.24 1620.32,1712.22 1634.57,1719.18 1656.8,1729.93 1656.92,1729.98 1679.26,1740.43 1694.85,1747.64 1701.61,1750.74 1723.95,1760.78 1734.34,1765.35 1746.3,1770.59 1768.64,1780.17 1775.57,1783.07 1790.99,1789.46 1813.33,1798.55 1818.99,1800.78 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#1f0c47; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2371.96,1362.46 2369.14,1357.97 2357.68,1340.25 2349.61,1328.04 2345.96,1322.54 2333.87,1304.83 2327.27,1295.35 2321.5,1287.12 2308.83,1269.4 2304.92,1264.05 2295.83,1251.69 2282.65,1233.98 2282.58,1233.89 2269.01,1216.27 2260.23,1204.97 2255.21,1198.56 2241.13,1180.84 2237.89,1176.84 2226.71,1163.13 2215.54,1149.55 2212.12,1145.42 2197.22,1127.71 2193.2,1123 2182.02,1109.99 2170.85,1097.1 2166.64,1092.28 2151,1074.57 2148.51,1071.79 2135.03,1056.86 2126.16,1047.11 2118.87,1039.14 2103.82,1022.83 2102.51,1021.43 2085.82,1003.72 2081.47,999.149 2068.89,986.005 2059.13,975.894 2051.75,968.293 2036.78,953.002 2034.4,950.58 2016.76,932.868 2014.44,930.555 1998.85,915.155 1992.09,908.53 1980.72,897.443 1969.75,886.829 1962.37,879.731 1947.4,865.444 1943.79,862.018 1925.06,844.37 1924.99,844.306 1905.86,826.593 1902.71,823.702 1886.49,808.881 1880.37,803.323 1866.89,791.168 1858.02,783.222 1847.05,773.456 1835.68,763.394 1826.97,755.743 1813.33,743.835 1806.64,738.031 1790.99,724.538 1786.06,720.318 1768.64,705.499 1765.22,702.606 1746.3,686.711 1744.12,684.893 1723.95,668.171 1722.75,667.181 1701.61,649.873 1701.11,649.468 1679.26,631.813 1679.19,631.756 1656.99,614.043 1656.92,613.988 1634.57,596.388 1634.5,596.331 1612.23,579.013 1611.72,578.618 1589.88,561.859 1588.63,560.906 1567.54,544.92 1565.24,543.193 1545.19,528.193 1541.54,525.481 1522.85,511.674 1517.52,507.768 1500.5,495.359 1493.18,490.056 1478.16,479.244 1468.5,472.344 1455.81,463.325 1443.49,454.631 1433.47,447.6 1418.13,436.919 1411.12,432.064 1392.42,419.206 1388.78,416.714 1366.43,401.548 1366.35,401.494 1344.09,386.643 1339.76,383.781 1321.74,371.919 1312.79,366.069 1299.4,357.372 1285.41,348.356 1277.05,343 1257.62,330.644 1254.71,328.799 1232.36,314.821 1229.31,312.931 1210.02,301.069 1200.43,295.219 1187.67,287.483 1171.09,277.506 1165.33,274.059 1142.98,260.826 1141.21,259.794 1120.64,247.859 1110.59,242.081 1098.29,235.05 1079.45,224.369 1075.95,222.395 1053.6,209.991 1047.52,206.656 1031.26,197.8 1014.85,188.944 1008.91,185.758 986.567,173.944 981.353,171.231 964.222,162.375 946.926,153.519 941.877,150.95 919.532,139.786 911.437,135.806 897.187,128.844 874.957,118.094 874.842,118.039 852.497,107.591 836.904,100.382 830.152,97.279 807.807,87.2419 797.423,82.669 785.462,77.4358 763.117,67.8496 756.187,64.9566 740.772,58.5637 718.427,49.4732 712.764,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#3b0964; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1001.75,47.2441 1008.91,51.1827 1031.26,63.5823 1033.7,64.9566 1053.6,76.2022 1064.97,82.669 1075.95,88.9477 1095.8,100.382 1098.29,101.821 1120.64,114.903 1126.04,118.094 1142.98,128.15 1155.8,135.806 1165.33,141.528 1185.17,153.519 1187.67,155.039 1210.02,168.747 1214.03,171.231 1232.36,182.627 1242.46,188.944 1254.71,196.644 1270.53,206.656 1277.05,210.8 1298.27,224.369 1299.4,225.096 1321.74,239.597 1325.54,242.081 1344.09,254.259 1352.47,259.794 1366.43,269.065 1379.07,277.506 1388.78,284.017 1405.37,295.219 1411.12,299.118 1431.37,312.931 1433.47,314.37 1455.81,329.797 1457.03,330.644 1478.16,345.411 1482.35,348.356 1500.5,361.18 1507.38,366.069 1522.85,377.106 1532.15,383.781 1545.19,393.191 1556.64,401.494 1567.54,409.438 1580.86,419.206 1589.88,425.848 1604.83,436.919 1612.23,442.426 1628.53,454.631 1634.57,459.172 1651.99,472.344 1656.92,476.09 1675.19,490.056 1679.26,493.183 1698.15,507.768 1701.61,510.453 1720.86,525.481 1723.95,527.903 1743.34,543.193 1746.3,545.535 1765.59,560.906 1768.64,563.353 1787.6,578.618 1790.99,581.36 1809.39,596.331 1813.33,599.558 1830.95,614.043 1835.68,617.951 1852.29,631.756 1858.02,636.541 1873.42,649.468 1880.37,655.333 1894.33,667.181 1902.71,674.328 1915.03,684.893 1925.06,693.532 1935.53,702.606 1947.4,712.946 1955.82,720.318 1969.75,732.575 1975.91,738.031 1992.09,752.422 1995.81,755.743 2014.44,772.491 2015.5,773.456 2034.97,791.168 2036.78,792.832 2054.21,808.881 2059.13,813.437 2073.26,826.593 2081.47,834.284 2092.12,844.306 2103.82,855.376 2110.8,862.018 2126.16,876.717 2129.29,879.731 2147.59,897.443 2148.51,898.339 2165.62,915.155 2170.85,920.322 2183.48,932.868 2193.2,942.577 2201.16,950.58 2215.54,965.11 2218.67,968.293 2235.97,986.005 2237.89,987.989 2253.01,1003.72 2260.23,1011.27 2269.89,1021.43 2282.58,1034.86 2286.6,1039.14 2303.11,1056.86 2304.92,1058.83 2319.35,1074.57 2327.27,1083.27 2335.42,1092.28 2349.61,1108.06 2351.34,1109.99 2366.99,1127.71 2371.96,1133.38 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#550f6d; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2371.96,981.166 2359.31,968.293 2349.61,958.474 2341.78,950.58 2327.27,936.027 2324.1,932.868 2306.24,915.155 2304.92,913.857 2288.16,897.443 2282.58,892 2269.93,879.731 2260.23,870.37 2251.54,862.018 2237.89,848.962 2233,844.306 2215.54,827.774 2214.29,826.593 2195.37,808.881 2193.2,806.854 2176.27,791.168 2170.85,786.17 2157,773.456 2148.51,765.69 2137.57,755.743 2126.16,745.411 2117.97,738.031 2103.82,725.33 2098.21,720.318 2081.47,705.443 2078.27,702.606 2059.13,685.749 2058.15,684.893 2037.84,667.181 2036.78,666.266 2017.33,649.468 2014.44,646.985 1996.64,631.756 1992.09,627.884 1975.77,614.043 1969.75,608.959 1954.72,596.331 1947.4,590.209 1933.48,578.618 1925.06,571.631 1912.06,560.906 1902.71,553.222 1890.45,543.193 1880.37,534.981 1868.65,525.481 1858.02,516.905 1846.65,507.768 1835.68,498.992 1824.45,490.056 1813.33,481.239 1802.06,472.344 1790.99,463.645 1779.46,454.631 1768.64,446.208 1756.66,436.919 1746.3,428.924 1733.64,419.206 1723.95,411.793 1710.42,401.494 1701.61,394.813 1686.98,383.781 1679.26,377.98 1663.33,366.069 1656.92,361.294 1639.46,348.356 1634.57,344.752 1615.36,330.644 1612.23,328.353 1591.04,312.931 1589.88,312.095 1567.54,295.992 1566.46,295.219 1545.19,280.048 1541.61,277.506 1522.85,264.241 1516.52,259.794 1500.5,248.571 1491.19,242.081 1478.16,233.035 1465.61,224.369 1455.81,217.632 1439.77,206.656 1433.47,202.36 1413.68,188.944 1411.12,187.218 1388.78,172.224 1387.29,171.231 1366.43,157.396 1360.56,153.519 1344.09,142.695 1333.55,135.806 1321.74,128.119 1306.26,118.094 1299.4,113.666 1278.69,100.382 1277.05,99.3352 1254.71,85.1777 1250.72,82.669 1232.36,71.1635 1222.4,64.9566 1210.02,57.2686 1193.78,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#6e186e; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1348.42,47.2441 1366.43,59.0805 1375.33,64.9566 1388.78,73.8635 1402.01,82.669 1411.12,88.7598 1428.44,100.382 1433.47,103.771 1454.63,118.094 1455.81,118.898 1478.16,134.173 1480.53,135.806 1500.5,149.581 1506.19,153.519 1522.85,165.107 1531.61,171.231 1545.19,180.752 1556.82,188.944 1567.54,196.518 1581.82,206.656 1589.88,212.406 1606.59,224.369 1612.23,228.418 1631.16,242.081 1634.57,244.555 1655.51,259.794 1656.92,260.818 1679.26,277.216 1679.66,277.506 1701.61,293.76 1703.57,295.219 1723.95,310.433 1727.28,312.931 1746.3,327.236 1750.81,330.644 1768.64,344.171 1774.14,348.356 1790.99,361.24 1797.28,366.069 1813.33,378.443 1820.23,383.781 1835.68,395.783 1843,401.494 1858.02,413.261 1865.58,419.206 1880.37,430.879 1887.99,436.919 1902.71,448.638 1910.21,454.631 1925.06,466.541 1932.26,472.344 1947.4,484.588 1954.14,490.056 1969.75,502.782 1975.84,507.768 1992.09,521.125 1997.37,525.481 2014.44,539.618 2018.73,543.193 2036.78,558.264 2039.93,560.906 2059.13,577.063 2060.97,578.618 2081.47,596.019 2081.84,596.331 2102.52,614.043 2103.82,615.155 2123.04,631.756 2126.16,634.462 2143.4,649.468 2148.51,653.934 2163.6,667.181 2170.85,673.575 2183.64,684.893 2193.2,693.385 2203.53,702.606 2215.54,713.368 2223.27,720.318 2237.89,733.525 2242.85,738.031 2260.23,753.859 2262.29,755.743 2281.56,773.456 2282.58,774.393 2300.65,791.168 2304.92,795.155 2319.58,808.881 2327.27,816.106 2338.37,826.593 2349.61,837.249 2357.02,844.306 2371.96,858.585 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#88216a; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2371.96,753.065 2355.57,738.031 2349.61,732.589 2336.13,720.318 2327.27,712.277 2316.56,702.606 2304.92,692.126 2296.86,684.893 2282.58,672.136 2277.01,667.181 2260.23,652.304 2257.02,649.468 2237.89,632.628 2236.89,631.756 2216.6,614.043 2215.54,613.124 2196.15,596.331 2193.2,593.786 2175.55,578.618 2170.85,574.596 2154.81,560.906 2148.51,555.552 2133.91,543.193 2126.16,536.652 2112.87,525.481 2103.82,517.895 2091.68,507.768 2081.47,499.278 2070.34,490.056 2059.13,480.802 2048.84,472.344 2036.78,462.463 2027.19,454.631 2014.44,444.26 2005.38,436.919 1992.09,426.193 1983.41,419.206 1969.75,408.258 1961.27,401.494 1947.4,390.456 1938.98,383.781 1925.06,372.784 1916.52,366.069 1902.71,355.241 1893.9,348.356 1880.37,337.825 1871.1,330.644 1858.02,320.536 1848.14,312.931 1835.68,303.372 1825.01,295.219 1813.33,286.331 1801.7,277.506 1790.99,269.412 1778.21,259.794 1768.64,252.614 1754.55,242.081 1746.3,235.936 1730.71,224.369 1723.95,219.375 1706.68,206.656 1701.61,202.932 1682.47,188.944 1679.26,186.605 1658.08,171.231 1656.92,170.392 1634.57,154.307 1633.47,153.519 1612.23,138.35 1608.65,135.806 1589.88,122.506 1583.63,118.094 1567.54,106.774 1558.41,100.382 1545.19,91.1524 1532.99,82.669 1522.85,75.6398 1507.37,64.9566 1500.5,60.2353 1481.54,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#a12b61; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1600.17,47.2441 1612.23,55.7397 1625.25,64.9566 1634.57,71.5698 1650.15,82.669 1656.92,87.5037 1674.87,100.382 1679.26,103.542 1699.41,118.094 1701.61,119.687 1723.77,135.806 1723.95,135.938 1746.3,152.318 1747.93,153.519 1768.64,168.807 1771.91,171.231 1790.99,185.404 1795.73,188.944 1813.33,202.111 1819.38,206.656 1835.68,218.929 1842.87,224.369 1858.02,235.858 1866.2,242.081 1880.37,252.901 1889.36,259.794 1902.71,270.057 1912.37,277.506 1925.06,287.328 1935.21,295.219 1947.4,304.716 1957.91,312.931 1969.75,322.221 1980.44,330.644 1992.09,339.845 2002.83,348.356 2014.44,357.589 2025.06,366.069 2036.78,375.454 2047.14,383.781 2059.13,393.441 2069.08,401.494 2081.47,411.552 2090.87,419.206 2103.82,429.788 2112.51,436.919 2126.16,448.15 2134.01,454.631 2148.51,466.639 2155.37,472.344 2170.85,485.258 2176.58,490.056 2193.2,504.006 2197.66,507.768 2215.54,522.886 2218.6,525.481 2237.89,541.899 2239.4,543.193 2260.06,560.906 2260.23,561.049 2280.57,578.618 2282.58,580.361 2300.93,596.331 2304.92,599.812 2321.17,614.043 2327.27,619.405 2341.27,631.756 2349.61,639.141 2361.24,649.468 2371.96,659.022 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#ba3655; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2371.96,573.328 2357.67,560.906 2349.61,553.916 2337.2,543.193 2327.27,534.632 2316.61,525.481 2304.92,515.477 2295.89,507.768 2282.58,496.449 2275.04,490.056 2260.23,477.546 2254.05,472.344 2237.89,458.768 2232.94,454.631 2215.54,440.113 2211.7,436.919 2193.2,421.579 2190.32,419.206 2170.85,403.167 2168.81,401.494 2148.51,384.874 2147.17,383.781 2126.16,366.699 2125.38,366.069 2103.82,348.642 2103.46,348.356 2081.47,330.701 2081.4,330.644 2059.2,312.931 2059.13,312.875 2036.85,295.219 2036.78,295.163 2014.44,277.563 2014.36,277.506 1992.09,260.075 1991.73,259.794 1969.75,242.698 1968.95,242.081 1947.4,225.43 1946.02,224.369 1925.06,208.272 1922.95,206.656 1902.71,191.22 1899.72,188.944 1880.37,174.276 1876.34,171.231 1858.02,157.437 1852.8,153.519 1835.68,140.702 1829.11,135.806 1813.33,124.071 1805.27,118.094 1790.99,107.543 1781.26,100.382 1768.64,91.1165 1757.1,82.669 1746.3,74.7908 1732.77,64.9566 1723.95,58.5649 1708.28,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#d04544; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1808.22,47.2441 1813.33,51.0009 1832.26,64.9566 1835.68,67.4814 1856.15,82.669 1858.02,84.0585 1879.9,100.382 1880.37,100.733 1902.71,117.515 1903.48,118.094 1925.06,134.399 1926.91,135.806 1947.4,151.383 1950.2,153.519 1969.75,168.465 1973.35,171.231 1992.09,185.649 1996.36,188.944 2014.44,202.934 2019.23,206.656 2036.78,220.321 2041.96,224.369 2059.13,237.811 2064.56,242.081 2081.47,255.405 2087.02,259.794 2103.82,273.105 2109.35,277.506 2126.16,290.91 2131.55,295.219 2148.51,308.822 2153.61,312.931 2170.85,326.842 2175.55,330.644 2193.2,344.972 2197.35,348.356 2215.54,363.211 2219.03,366.069 2237.89,381.56 2240.58,383.781 2260.23,400.022 2262.01,401.494 2282.58,418.597 2283.31,419.206 2304.48,436.919 2304.92,437.291 2325.51,454.631 2327.27,456.112 2346.43,472.344 2349.61,475.05 2367.22,490.056 2371.96,494.108 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#e35832; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2371.96,420.071 2370.93,419.206 2349.83,401.494 2349.61,401.313 2328.59,383.781 2327.27,382.677 2307.24,366.069 2304.92,364.149 2285.77,348.356 2282.58,345.727 2264.18,330.644 2260.23,327.412 2242.47,312.931 2237.89,309.201 2220.64,295.219 2215.54,291.094 2198.69,277.506 2193.2,273.091 2176.61,259.794 2170.85,255.19 2154.41,242.081 2148.51,237.39 2132.08,224.369 2126.16,219.691 2109.62,206.656 2103.82,202.091 2087.04,188.944 2081.47,184.59 2064.33,171.231 2059.13,167.188 2041.49,153.519 2036.78,149.882 2018.51,135.806 2014.44,132.673 1995.41,118.094 1992.09,115.56 1972.17,100.382 1969.75,98.5416 1948.79,82.669 1947.4,81.6171 1925.28,64.9566 1925.06,64.7858 1902.71,48.0582 1901.62,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#f0701e; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1989.58,47.2441 1992.09,49.1452 2012.93,64.9566 2014.44,66.105 2036.14,82.669 2036.78,83.1558 2059.13,100.299 2059.23,100.382 2081.47,117.54 2082.19,118.094 2103.82,134.874 2105.02,135.806 2126.16,152.299 2127.72,153.519 2148.51,169.819 2150.3,171.231 2170.85,187.432 2172.76,188.944 2193.2,205.141 2195.1,206.656 2215.54,222.945 2217.32,224.369 2237.89,240.845 2239.42,242.081 2260.23,258.843 2261.41,259.794 2282.58,276.939 2283.27,277.506 2304.92,295.134 2305.02,295.219 2326.65,312.931 2327.27,313.436 2348.16,330.644 2349.61,331.84 2369.56,348.356 2371.96,350.348 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#f98c09; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2371.96,284.254 2363.73,277.506 2349.61,265.963 2342.05,259.794 2327.27,247.768 2320.26,242.081 2304.92,229.669 2298.36,224.369 2282.58,211.664 2276.34,206.656 2260.23,193.754 2254.21,188.944 2237.89,175.936 2231.97,171.231 2215.54,158.212 2209.61,153.519 2193.2,140.579 2187.13,135.806 2170.85,123.037 2164.53,118.094 2148.51,105.586 2141.82,100.382 2126.16,88.2241 2118.99,82.669 2103.82,70.9516 2096.03,64.9566 2081.47,53.7674 2072.96,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#fbaa0e; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2152.45,47.2441 2170.85,61.5076 2175.29,64.9566 2193.2,78.9062 2198.01,82.669 2215.54,96.3908 2220.63,100.382 2237.89,113.962 2243.12,118.094 2260.23,131.62 2265.51,135.806 2282.58,149.366 2287.79,153.519 2304.92,167.201 2309.96,171.231 2327.27,185.125 2332.01,188.944 2349.61,203.138 2353.96,206.656 2371.96,221.242 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#f8c931; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2371.96,160.96 2362.7,153.519 2349.61,143.016 2340.6,135.806 2327.27,125.158 2318.4,118.094 2304.92,107.386 2296.09,100.382 2282.58,89.6988 2273.66,82.669 2260.23,72.0966 2251.14,64.9566 2237.89,54.5785 2228.5,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#f1e864; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2301.57,47.2441 2304.92,49.8845 2324.02,64.9566 2327.27,67.5208 2346.38,82.669 2349.61,85.2392 2368.62,100.382 2371.96,103.04 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#090621; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1583.55,738.031 1589.88,743.238 1604.96,755.743 1612.23,761.827 1626,773.456 1634.57,780.766 1646.67,791.168 1656.92,800.067 1666.98,808.881 1679.26,819.738 1686.95,826.593 1701.61,839.791 1706.58,844.306 1723.95,860.238 1725.88,862.018 1744.79,879.731 1746.3,881.16 1763.3,897.443 1768.64,902.617 1781.48,915.155 1790.99,924.53 1799.37,932.868 1813.33,946.914 1816.95,950.58 1834.17,968.293 1835.68,969.871 1850.94,986.005 1858.02,993.574 1867.43,1003.72 1880.37,1017.84 1883.63,1021.43 1899.43,1039.14 1902.71,1042.9 1914.81,1056.86 1925.06,1068.83 1929.92,1074.57 1944.66,1092.28 1947.4,1095.66 1958.92,1109.99 1969.75,1123.65 1972.93,1127.71 1986.45,1145.42 1992.09,1152.98 1999.59,1163.13 2012.4,1180.84 2014.44,1183.77 2024.63,1198.56 2036.62,1216.27 2036.78,1216.52 2047.9,1233.98 2058.96,1251.69 2059.13,1251.98 2069.26,1269.4 2079.25,1287.12 2081.47,1291.33 2088.52,1304.83 2097.29,1322.54 2103.82,1336.59 2105.5,1340.25 2112.86,1357.97 2119.62,1375.68 2125.7,1393.39 2126.16,1395.02 2130.7,1411.1 2134.78,1428.82 2137.84,1446.53 2139.71,1464.24 2140.17,1481.95 2138.97,1499.67 2135.78,1517.38 2130.18,1535.09 2126.16,1543.74 2121.16,1552.8 2107.5,1570.52 2103.82,1574.19 2086.1,1588.23 2081.47,1591.15 2059.13,1601.98 2047.69,1605.94 2036.78,1609.13 2014.44,1613.56 1992.09,1616.09 1969.75,1617.04 1947.4,1616.68 1925.06,1615.2 1902.71,1612.78 1880.37,1609.54 1860.08,1605.94 1858.02,1605.57 1835.68,1600.76 1813.33,1595.4 1790.99,1589.57 1786.36,1588.23 1768.64,1583.06 1746.3,1576.11 1729.27,1570.52 1723.95,1568.75 1701.61,1560.84 1679.62,1552.8 1679.26,1552.67 1656.92,1543.91 1634.89,1535.09 1634.57,1534.96 1612.23,1525.46 1593.57,1517.38 1589.88,1515.77 1567.54,1505.61 1554.73,1499.67 1545.19,1495.2 1522.85,1484.48 1517.73,1481.95 1500.5,1473.37 1482.42,1464.24 1478.16,1462.07 1455.81,1450.39 1448.58,1446.53 1433.47,1438.41 1415.86,1428.82 1411.12,1426.21 1388.78,1413.69 1384.24,1411.1 1366.43,1400.85 1353.64,1393.39 1344.09,1387.78 1323.73,1375.68 1321.74,1374.49 1299.4,1360.83 1294.77,1357.97 1277.05,1346.9 1266.53,1340.25 1254.71,1332.72 1238.89,1322.54 1232.36,1318.31 1211.82,1304.83 1210.02,1303.64 1187.67,1288.64 1185.43,1287.12 1165.33,1273.35 1159.63,1269.4 1142.98,1257.79 1134.33,1251.69 1120.64,1241.96 1109.52,1233.98 1098.29,1225.86 1085.17,1216.27 1075.95,1209.47 1061.28,1198.56 1053.6,1192.79 1037.83,1180.84 1031.26,1175.82 1014.81,1163.13 1008.91,1158.54 992.204,1145.42 986.567,1140.95 970.009,1127.71 964.222,1123.03 948.211,1109.99 941.877,1104.79 926.799,1092.28 919.532,1086.2 905.762,1074.57 897.187,1067.26 885.091,1056.86 874.842,1047.96 864.777,1039.14 852.497,1028.29 844.81,1021.43 830.152,1008.23 825.181,1003.72 807.807,987.785 805.882,986.005 786.968,968.293 785.462,966.863 768.462,950.58 763.117,945.407 750.273,932.868 740.772,923.494 732.393,915.155 718.427,901.109 714.812,897.443 697.588,879.731 696.082,878.153 680.816,862.018 673.737,854.449 664.331,844.306 651.392,830.188 648.125,826.593 632.33,808.881 629.047,805.125 616.952,791.168 606.702,779.189 601.838,773.456 587.1,755.743 584.357,752.361 572.838,738.031 562.012,724.372 558.827,720.318 545.304,702.606 539.667,695.044 532.168,684.893 519.358,667.181 517.322,664.254 507.132,649.468 495.138,631.756 494.977,631.505 483.858,614.043 472.798,596.331 472.632,596.048 462.5,578.618 452.51,560.906 450.287,556.694 443.234,543.193 434.469,525.481 427.942,511.438 426.255,507.768 418.895,490.056 412.136,472.344 406.063,454.631 405.597,453 401.062,436.919 396.976,419.206 393.917,401.494 392.052,383.781 391.591,366.069 392.792,348.356 395.981,330.644 401.579,312.931 405.597,304.286 410.601,295.219 424.26,277.506 427.942,273.837 445.659,259.794 450.287,256.875 472.632,246.048 484.071,242.081 494.977,238.896 517.322,234.459 539.667,231.931 562.012,230.979 584.357,231.345 606.702,232.823 629.047,235.248 651.392,238.487 671.679,242.081 673.737,242.45 696.082,247.264 718.427,252.622 740.772,258.456 745.401,259.794 763.117,264.968 785.462,271.915 802.493,277.506 807.807,279.269 830.152,287.187 852.14,295.219 852.497,295.35 874.842,304.117 896.871,312.931 897.187,313.059 919.532,322.567 938.184,330.644 941.877,332.258 964.222,342.412 977.027,348.356 986.567,352.825 1008.91,363.544 1014.03,366.069 1031.26,374.651 1049.33,383.781 1053.6,385.956 1075.95,397.638 1083.18,401.494 1098.29,409.618 1115.9,419.206 1120.64,421.809 1142.98,434.329 1147.52,436.919 1165.33,447.175 1178.12,454.631 1187.67,460.243 1208.03,472.344 1210.02,473.537 1232.36,487.191 1236.99,490.056 1254.71,501.126 1265.23,507.768 1277.05,515.3 1292.87,525.481 1299.4,529.718 1319.94,543.193 1321.74,544.387 1344.09,559.38 1346.33,560.906 1366.43,574.678 1372.13,578.618 1388.78,590.237 1397.42,596.331 1411.12,606.065 1422.24,614.043 1433.47,622.168 1446.59,631.756 1455.81,638.553 1470.48,649.468 1478.16,655.229 1493.93,667.181 1500.5,672.202 1516.95,684.893 1522.85,689.481 1539.55,702.606 1545.19,707.074 1561.75,720.318 1567.54,724.99 1583.55,738.031 "></polyline>
<defs>
  <clippath id="clip073">
    <rect x="2425" y="47" width="82" height="1755"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip073)" style="stroke:#0a0723; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2425.72,1691.18 2506.36,1691.18 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#200c4a; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2425.72,1581.59 2506.36,1581.59 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#3c0965; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2425.72,1471.99 2506.36,1471.99 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#570f6d; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2425.72,1362.4 2506.36,1362.4 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#70196e; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2425.72,1252.8 2506.36,1252.8 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#892269; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2425.72,1143.2 2506.36,1143.2 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#a32b61; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2425.72,1033.61 2506.36,1033.61 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#bb3754; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2425.72,924.012 2506.36,924.012 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#d04544; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2425.72,814.416 2506.36,814.416 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#e35832; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2425.72,704.82 2506.36,704.82 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#f0701e; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2425.72,595.224 2506.36,595.224 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#f98c09; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2425.72,485.628 2506.36,485.628 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#fbaa0e; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2425.72,376.032 2506.36,376.032 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#f8c931; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2425.72,266.436 2506.36,266.436 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#f1e864; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2425.72,156.84 2506.36,156.84 "></polyline>
<path clip-path="url(#clip070)" d="M2552.3 1566.97 L2568.62 1566.97 L2568.62 1570.9 L2546.68 1570.9 L2546.68 1566.97 Q2549.34 1564.21 2553.92 1559.58 Q2558.53 1554.93 2559.71 1553.59 Q2561.95 1551.06 2562.83 1549.33 Q2563.74 1547.57 2563.74 1545.88 Q2563.74 1543.12 2561.79 1541.39 Q2559.87 1539.65 2556.77 1539.65 Q2554.57 1539.65 2552.12 1540.42 Q2549.69 1541.18 2546.91 1542.73 L2546.91 1538.01 Q2549.73 1536.87 2552.19 1536.29 Q2554.64 1535.72 2556.68 1535.72 Q2562.05 1535.72 2565.24 1538.4 Q2568.44 1541.09 2568.44 1545.58 Q2568.44 1547.71 2567.62 1549.63 Q2566.84 1551.53 2564.73 1554.12 Q2564.15 1554.79 2561.05 1558.01 Q2557.95 1561.2 2552.3 1566.97 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2578.43 1565.02 L2583.32 1565.02 L2583.32 1570.9 L2578.43 1570.9 L2578.43 1565.02 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2593.55 1536.34 L2611.91 1536.34 L2611.91 1540.28 L2597.83 1540.28 L2597.83 1548.75 Q2598.85 1548.4 2599.87 1548.24 Q2600.89 1548.05 2601.91 1548.05 Q2607.69 1548.05 2611.07 1551.23 Q2614.45 1554.4 2614.45 1559.81 Q2614.45 1565.39 2610.98 1568.49 Q2607.51 1571.57 2601.19 1571.57 Q2599.01 1571.57 2596.75 1571.2 Q2594.5 1570.83 2592.09 1570.09 L2592.09 1565.39 Q2594.18 1566.53 2596.4 1567.08 Q2598.62 1567.64 2601.1 1567.64 Q2605.1 1567.64 2607.44 1565.53 Q2609.78 1563.42 2609.78 1559.81 Q2609.78 1556.2 2607.44 1554.1 Q2605.1 1551.99 2601.1 1551.99 Q2599.22 1551.99 2597.35 1552.41 Q2595.5 1552.82 2593.55 1553.7 L2593.55 1536.34 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2506.36,1557.25 2533.24,1557.25 "></polyline>
<path clip-path="url(#clip070)" d="M2548.13 1292.79 L2566.49 1292.79 L2566.49 1296.73 L2552.42 1296.73 L2552.42 1305.2 Q2553.44 1304.85 2554.45 1304.69 Q2555.47 1304.5 2556.49 1304.5 Q2562.28 1304.5 2565.66 1307.68 Q2569.04 1310.85 2569.04 1316.26 Q2569.04 1321.84 2565.56 1324.94 Q2562.09 1328.02 2555.77 1328.02 Q2553.6 1328.02 2551.33 1327.65 Q2549.08 1327.28 2546.68 1326.54 L2546.68 1321.84 Q2548.76 1322.98 2550.98 1323.53 Q2553.2 1324.09 2555.68 1324.09 Q2559.69 1324.09 2562.02 1321.98 Q2564.36 1319.87 2564.36 1316.26 Q2564.36 1312.65 2562.02 1310.55 Q2559.69 1308.44 2555.68 1308.44 Q2553.81 1308.44 2551.93 1308.86 Q2550.08 1309.27 2548.13 1310.15 L2548.13 1292.79 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2578.25 1321.47 L2583.13 1321.47 L2583.13 1327.35 L2578.25 1327.35 L2578.25 1321.47 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2603.32 1295.87 Q2599.71 1295.87 2597.88 1299.44 Q2596.07 1302.98 2596.07 1310.11 Q2596.07 1317.21 2597.88 1320.78 Q2599.71 1324.32 2603.32 1324.32 Q2606.95 1324.32 2608.76 1320.78 Q2610.59 1317.21 2610.59 1310.11 Q2610.59 1302.98 2608.76 1299.44 Q2606.95 1295.87 2603.32 1295.87 M2603.32 1292.17 Q2609.13 1292.17 2612.18 1296.77 Q2615.26 1301.36 2615.26 1310.11 Q2615.26 1318.83 2612.18 1323.44 Q2609.13 1328.02 2603.32 1328.02 Q2597.51 1328.02 2594.43 1323.44 Q2591.37 1318.83 2591.37 1310.11 Q2591.37 1301.36 2594.43 1296.77 Q2597.51 1292.17 2603.32 1292.17 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2506.36,1313.7 2533.24,1313.7 "></polyline>
<path clip-path="url(#clip070)" d="M2546.68 1049.24 L2568.9 1049.24 L2568.9 1051.23 L2556.35 1083.8 L2551.47 1083.8 L2563.27 1053.18 L2546.68 1053.18 L2546.68 1049.24 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2578.02 1077.92 L2582.9 1077.92 L2582.9 1083.8 L2578.02 1083.8 L2578.02 1077.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2593.13 1049.24 L2611.49 1049.24 L2611.49 1053.18 L2597.42 1053.18 L2597.42 1061.65 Q2598.43 1061.3 2599.45 1061.14 Q2600.47 1060.96 2601.49 1060.96 Q2607.28 1060.96 2610.66 1064.13 Q2614.04 1067.3 2614.04 1072.71 Q2614.04 1078.29 2610.56 1081.4 Q2607.09 1084.47 2600.77 1084.47 Q2598.6 1084.47 2596.33 1084.1 Q2594.08 1083.73 2591.68 1082.99 L2591.68 1078.29 Q2593.76 1079.43 2595.98 1079.98 Q2598.2 1080.54 2600.68 1080.54 Q2604.68 1080.54 2607.02 1078.43 Q2609.36 1076.33 2609.36 1072.71 Q2609.36 1069.1 2607.02 1067 Q2604.68 1064.89 2600.68 1064.89 Q2598.81 1064.89 2596.93 1065.31 Q2595.08 1065.72 2593.13 1066.6 L2593.13 1049.24 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2506.36,1070.15 2533.24,1070.15 "></polyline>
<path clip-path="url(#clip070)" d="M2547.35 836.318 L2554.99 836.318 L2554.99 809.952 L2546.68 811.619 L2546.68 807.36 L2554.94 805.693 L2559.62 805.693 L2559.62 836.318 L2567.25 836.318 L2567.25 840.253 L2547.35 840.253 L2547.35 836.318 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2586.7 808.772 Q2583.09 808.772 2581.26 812.337 Q2579.45 815.878 2579.45 823.008 Q2579.45 830.114 2581.26 833.679 Q2583.09 837.221 2586.7 837.221 Q2590.33 837.221 2592.14 833.679 Q2593.97 830.114 2593.97 823.008 Q2593.97 815.878 2592.14 812.337 Q2590.33 808.772 2586.7 808.772 M2586.7 805.068 Q2592.51 805.068 2595.56 809.675 Q2598.64 814.258 2598.64 823.008 Q2598.64 831.735 2595.56 836.341 Q2592.51 840.924 2586.7 840.924 Q2580.89 840.924 2577.81 836.341 Q2574.75 831.735 2574.75 823.008 Q2574.75 814.258 2577.81 809.675 Q2580.89 805.068 2586.7 805.068 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2606.86 834.374 L2611.75 834.374 L2611.75 840.253 L2606.86 840.253 L2606.86 834.374 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2631.93 808.772 Q2628.32 808.772 2626.49 812.337 Q2624.68 815.878 2624.68 823.008 Q2624.68 830.114 2626.49 833.679 Q2628.32 837.221 2631.93 837.221 Q2635.56 837.221 2637.37 833.679 Q2639.2 830.114 2639.2 823.008 Q2639.2 815.878 2637.37 812.337 Q2635.56 808.772 2631.93 808.772 M2631.93 805.068 Q2637.74 805.068 2640.8 809.675 Q2643.87 814.258 2643.87 823.008 Q2643.87 831.735 2640.8 836.341 Q2637.74 840.924 2631.93 840.924 Q2626.12 840.924 2623.04 836.341 Q2619.99 831.735 2619.99 823.008 Q2619.99 814.258 2623.04 809.675 Q2626.12 805.068 2631.93 805.068 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2506.36,826.602 2533.24,826.602 "></polyline>
<path clip-path="url(#clip070)" d="M2547.35 592.769 L2554.99 592.769 L2554.99 566.403 L2546.68 568.07 L2546.68 563.81 L2554.94 562.144 L2559.62 562.144 L2559.62 592.769 L2567.25 592.769 L2567.25 596.704 L2547.35 596.704 L2547.35 592.769 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2580.73 592.769 L2597.05 592.769 L2597.05 596.704 L2575.1 596.704 L2575.1 592.769 Q2577.76 590.014 2582.35 585.384 Q2586.95 580.732 2588.13 579.389 Q2590.38 576.866 2591.26 575.13 Q2592.16 573.371 2592.16 571.681 Q2592.16 568.926 2590.22 567.19 Q2588.3 565.454 2585.19 565.454 Q2583 565.454 2580.54 566.218 Q2578.11 566.982 2575.33 568.533 L2575.33 563.81 Q2578.16 562.676 2580.61 562.097 Q2583.06 561.519 2585.1 561.519 Q2590.47 561.519 2593.67 564.204 Q2596.86 566.889 2596.86 571.38 Q2596.86 573.509 2596.05 575.431 Q2595.26 577.329 2593.16 579.921 Q2592.58 580.593 2589.48 583.81 Q2586.37 587.005 2580.73 592.769 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2606.86 590.824 L2611.75 590.824 L2611.75 596.704 L2606.86 596.704 L2606.86 590.824 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2621.98 562.144 L2640.33 562.144 L2640.33 566.079 L2626.26 566.079 L2626.26 574.551 Q2627.28 574.204 2628.3 574.042 Q2629.31 573.857 2630.33 573.857 Q2636.12 573.857 2639.5 577.028 Q2642.88 580.199 2642.88 585.616 Q2642.88 591.195 2639.41 594.296 Q2635.93 597.375 2629.62 597.375 Q2627.44 597.375 2625.17 597.005 Q2622.93 596.634 2620.52 595.894 L2620.52 591.195 Q2622.6 592.329 2624.82 592.884 Q2627.05 593.44 2629.52 593.44 Q2633.53 593.44 2635.87 591.333 Q2638.2 589.227 2638.2 585.616 Q2638.2 582.005 2635.87 579.898 Q2633.53 577.792 2629.52 577.792 Q2627.65 577.792 2625.77 578.209 Q2623.92 578.625 2621.98 579.505 L2621.98 562.144 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2506.36,583.053 2533.24,583.053 "></polyline>
<path clip-path="url(#clip070)" d="M2547.35 349.219 L2554.99 349.219 L2554.99 322.854 L2546.68 324.52 L2546.68 320.261 L2554.94 318.594 L2559.62 318.594 L2559.62 349.219 L2567.25 349.219 L2567.25 353.154 L2547.35 353.154 L2547.35 349.219 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2576.75 318.594 L2595.1 318.594 L2595.1 322.53 L2581.03 322.53 L2581.03 331.002 Q2582.05 330.655 2583.06 330.493 Q2584.08 330.307 2585.1 330.307 Q2590.89 330.307 2594.27 333.479 Q2597.65 336.65 2597.65 342.067 Q2597.65 347.645 2594.18 350.747 Q2590.7 353.826 2584.38 353.826 Q2582.21 353.826 2579.94 353.455 Q2577.69 353.085 2575.29 352.344 L2575.29 347.645 Q2577.37 348.779 2579.59 349.335 Q2581.81 349.891 2584.29 349.891 Q2588.3 349.891 2590.63 347.784 Q2592.97 345.678 2592.97 342.067 Q2592.97 338.455 2590.63 336.349 Q2588.3 334.243 2584.29 334.243 Q2582.42 334.243 2580.54 334.659 Q2578.69 335.076 2576.75 335.955 L2576.75 318.594 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2606.86 347.275 L2611.75 347.275 L2611.75 353.154 L2606.86 353.154 L2606.86 347.275 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2631.93 321.673 Q2628.32 321.673 2626.49 325.238 Q2624.68 328.78 2624.68 335.909 Q2624.68 343.016 2626.49 346.58 Q2628.32 350.122 2631.93 350.122 Q2635.56 350.122 2637.37 346.58 Q2639.2 343.016 2639.2 335.909 Q2639.2 328.78 2637.37 325.238 Q2635.56 321.673 2631.93 321.673 M2631.93 317.969 Q2637.74 317.969 2640.8 322.576 Q2643.87 327.159 2643.87 335.909 Q2643.87 344.636 2640.8 349.242 Q2637.74 353.826 2631.93 353.826 Q2626.12 353.826 2623.04 349.242 Q2619.99 344.636 2619.99 335.909 Q2619.99 327.159 2623.04 322.576 Q2626.12 317.969 2631.93 317.969 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2506.36,339.503 2533.24,339.503 "></polyline>
<path clip-path="url(#clip070)" d="M2547.35 105.67 L2554.99 105.67 L2554.99 79.3044 L2546.68 80.9711 L2546.68 76.7118 L2554.94 75.0452 L2559.62 75.0452 L2559.62 105.67 L2567.25 105.67 L2567.25 109.605 L2547.35 109.605 L2547.35 105.67 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2575.52 75.0452 L2597.74 75.0452 L2597.74 77.0359 L2585.19 109.605 L2580.31 109.605 L2592.12 78.9803 L2575.52 78.9803 L2575.52 75.0452 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2606.86 103.726 L2611.75 103.726 L2611.75 109.605 L2606.86 109.605 L2606.86 103.726 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2621.98 75.0452 L2640.33 75.0452 L2640.33 78.9803 L2626.26 78.9803 L2626.26 87.4525 Q2627.28 87.1053 2628.3 86.9432 Q2629.31 86.7581 2630.33 86.7581 Q2636.12 86.7581 2639.5 89.9293 Q2642.88 93.1006 2642.88 98.5173 Q2642.88 104.096 2639.41 107.198 Q2635.93 110.276 2629.62 110.276 Q2627.44 110.276 2625.17 109.906 Q2622.93 109.536 2620.52 108.795 L2620.52 104.096 Q2622.6 105.23 2624.82 105.786 Q2627.05 106.341 2629.52 106.341 Q2633.53 106.341 2635.87 104.235 Q2638.2 102.128 2638.2 98.5173 Q2638.2 94.9062 2635.87 92.7997 Q2633.53 90.6932 2629.52 90.6932 Q2627.65 90.6932 2625.77 91.1099 Q2623.92 91.5266 2621.98 92.4062 L2621.98 75.0452 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2506.36,95.954 2533.24,95.954 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2506.36,1800.78 2506.36,47.2441 "></polyline>
</svg>
</div>
</div>
<p>We could also use a <em>derivative-free</em> method, and skip a step:</p>
<div id="82" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">OptimizationProblem</span>(f, u0) <span class="co"># skip making an OptimizationFunction</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(prob, <span class="fu">NelderMead</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 2-element Vector{Float64}:
 1.0000084245371434
 2.9999988246128764</code></pre>
</div>
</div>
</section>
</section>
<section id="integration-integrals.jl" class="level2" data-number="68.4">
<h2 data-number="68.4" class="anchored" data-anchor-id="integration-integrals.jl"><span class="header-section-number">68.4</span> Integration (<code>Integrals.jl</code>)</h2>
<p>The <code>Integrals</code> package provides a common interface to different numeric integration packages in the <code>Julia</code> ecosystem. For example, <code>QuadGK</code> and <code>HCubature</code>. The value of this interface, over those two packages, is its non-differentiated access to other packages, which for some uses may be more performant.</p>
<p>The package follows the same <code>problem-algorithm-solve</code> interface, as already seen.</p>
<p>The interface is designed for <span class="math inline">\(1\)</span>-and-higher dimensional integrals.</p>
<p>The package is loaded with</p>
<div id="84" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Integrals</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a simple definite integral, such as <span class="math inline">\(\int_0^\pi \sin(x)dx\)</span>, we have:</p>
<div id="86" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(x, p) <span class="op">=</span> <span class="fu">sin</span>(x)</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">IntegralProblem</span>(f, <span class="fl">0.0</span>, <span class="fl">1</span>pi)</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>soln <span class="op">=</span> <span class="fu">solve</span>(prob, <span class="fu">QuadGKJL</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 2.0</code></pre>
</div>
</div>
<p>To get access to the answer, we can use indexing notation:</p>
<div id="88" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>soln[]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>2.0</code></pre>
</div>
</div>
<p>Comparing to just using <code>QuadGK</code>, the same definite integral would be estimated with:</p>
<div id="90" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">QuadGK</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">quadgk</span>(sin, <span class="fl">0</span>, <span class="cn">pi</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(2.0000000000000004, 1.7901236049056024e-12)</code></pre>
</div>
</div>
<p>The estimated upper bound on the error from <code>QuadGK</code>, is available through the <code>resid</code> property on the <code>Integrals</code> output:</p>
<div id="92" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>soln.resid</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>1.7905676941154525e-12</code></pre>
</div>
</div>
<p>The <code>Integrals</code> solution is a bit more verbose, but it is more flexible. For example, the <code>HCubature</code> package provides a similar means to compute <span class="math inline">\(n\)</span>- dimensional integrals. For this problem, the modifications would be:</p>
<div id="94" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(x, p) <span class="op">=</span> <span class="fu">sin</span>.(x)</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">IntegralProblem</span>(f, [<span class="fl">0.0</span>], [<span class="fl">1</span>pi])</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>soln <span class="op">=</span> <span class="fu">solve</span>(prob, <span class="fu">HCubatureJL</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 1-element Vector{Float64}:
 2.0</code></pre>
</div>
</div>
<div id="96" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>soln[]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>2.0</code></pre>
</div>
</div>
<p>The estimated maximum error is also given by <code>resid</code>:</p>
<div id="98" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>soln.resid</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>1.7896795156957523e-12</code></pre>
</div>
</div>
<hr>
<p>As well, suppose we wanted to parameterize our function and then differentiate.</p>
<p>Consider <span class="math inline">\(d/dp \int_0^\pi \sin(px) dx\)</span>. We can do this integral directly to get</p>
<p><span class="math display">\[
\begin{align*}
\frac{d}{dp} \int_0^\pi \sin(px)dx
&amp;= \frac{d}{dp}\left( \frac{-1}{p} \cos(px)\Big\rvert_0^\pi\right)\\
&amp;= \frac{d}{dp}\left( -\frac{\cos(p\cdot\pi)-1}{p}\right)\\
&amp;= \frac{\cos(p\cdot \pi) - 1}{p^2} + \frac{\pi\cdot\sin(p\cdot\pi)}{p}
\end{align*}
\]</span></p>
<p>Using <code>Integrals</code> with <code>QuadGK</code> we have:</p>
<div id="100" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(x, p) <span class="op">=</span> <span class="fu">sin</span>(p<span class="op">*</span>x)</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">∫sinpx</span>(p)</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>    prob <span class="op">=</span> <span class="fu">IntegralProblem</span>(f, <span class="fl">0.0</span>, <span class="fl">1</span>pi, p)</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">solve</span>(prob, <span class="fu">QuadGKJL</span>())</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>∫sinpx (generic function with 1 method)</code></pre>
</div>
</div>
<p>We can compute values at both <span class="math inline">\(p=1\)</span> and <span class="math inline">\(p=2\)</span>:</p>
<div id="102" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">∫sinpx</span>(<span class="fl">1</span>), <span class="fu">∫sinpx</span>(<span class="fl">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(fill(2.0), fill(-1.892082591466999e-16))</code></pre>
</div>
</div>
<p>To find the derivative in <span class="math inline">\(p\)</span> , we have:</p>
<div id="104" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>ForwardDiff.<span class="fu">derivative</span>(∫sinpx, <span class="fl">1</span>), ForwardDiff.<span class="fu">derivative</span>(∫sinpx, <span class="fl">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(fill(-1.9999999999999996), fill(-7.494005416219807e-16))</code></pre>
</div>
</div>
<p>(In <code>QuadGK</code>, the following can be differentiated <code>∫sinpx(p) = quadgk(x -&gt; sin(p*x), 0, pi)[1]</code> as well. <code>Integrals</code> gives a consistent interface.</p>
<section id="higher-dimension-integrals" class="level3" data-number="68.4.1">
<h3 data-number="68.4.1" class="anchored" data-anchor-id="higher-dimension-integrals"><span class="header-section-number">68.4.1</span> Higher dimension integrals</h3>
<p>The power of a common interface is the ability to swap backends and the uniformity for different dimensions. Here we discuss integrals of scalar-valued and vector-valued functions.</p>
<section id="f-rn-rightarrow-r" class="level4">
<h4 class="anchored" data-anchor-id="f-rn-rightarrow-r"><span class="math inline">\(f: R^n \rightarrow R\)</span></h4>
<p>The area under a surface generated by <span class="math inline">\(z=f(x,y)\)</span> over a rectangular region <span class="math inline">\([a,b]\times[c,d]\)</span> can be readily computed. The two coding implementations require <span class="math inline">\(f\)</span> to be expressed as a function of a vector–<em>and</em> a parameter–and the interval to be expressed using two vectors, one for the left endpoints (<code>[a,c]</code>) and one for the right endpoints (<code>[b,d]</code>).</p>
<p>For example, the area under the function <span class="math inline">\(f(x,y) = 1 + x^2 + 2y^2\)</span> over <span class="math inline">\([-1/2, 1/2] \times [-1,1]\)</span> is computed by:</p>
<div id="106" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(x, y) <span class="op">=</span> <span class="fl">1</span> <span class="op">+</span> x<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fl">2</span>y<span class="op">^</span><span class="fl">2</span>  <span class="co"># match math</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">fxp</span>(x, p) <span class="op">=</span> <span class="fu">f</span>(x[<span class="fl">1</span>], x[<span class="fl">2</span>]) <span class="co"># prepare for IntegralProblem</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>ls <span class="op">=</span> [<span class="op">-</span><span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span>]           <span class="co"># left endpoints</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>rs <span class="op">=</span> [<span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span>]             <span class="co"># right endpoints</span></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">IntegralProblem</span>(fxp, ls, rs)</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>soln <span class="op">=</span> <span class="fu">solve</span>(prob, <span class="fu">HCubatureJL</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 3.5</code></pre>
</div>
</div>
<p>Of course, we could have directly defined the function (<code>fxp</code>) using indexing of the <code>x</code> variable.</p>
<hr>
<p>For non-rectangular domains a change of variable is required.</p>
<p>For example, an integral to assist in finding the volume of a sphere might be</p>
<p><span class="math display">\[
V = 2 \iint_R \sqrt{\rho^2 - x^2 - y^2} dx dy
\]</span></p>
<p>where <span class="math inline">\(R\)</span> is the disc of radius <span class="math inline">\(\rho\)</span> in the <span class="math inline">\(x-y\)</span> plane.</p>
<p>The usual approach is to change to polar-coordinates and write this integral as</p>
<p><span class="math display">\[
V = \int_0^{2\pi}\int_0^\rho \sqrt{\rho^2 - r^2} r dr d\theta
\]</span></p>
<p>the latter being an integral over a rectangular domain.</p>
<p>To compute this transformed integral, we might have:</p>
<div id="108" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">vol_sphere</span>(ρ)</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">f</span>(rθ, p) <span class="op">=</span> <span class="fu">sqrt</span>(ρ<span class="op">^</span><span class="fl">2</span> <span class="op">-</span> rθ[<span class="fl">1</span>]<span class="op">^</span><span class="fl">2</span>) <span class="op">*</span> rθ[<span class="fl">1</span>]</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>    ls <span class="op">=</span> [<span class="fl">0.0</span>,<span class="fl">0.0</span>]</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">=</span> [ρ, <span class="fl">2</span>pi]</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    prob <span class="op">=</span> <span class="fu">IntegralProblem</span>(f, ls, rs)</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">solve</span>(prob, <span class="fu">HCubatureJL</span>())</span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a><span class="fu">vol_sphere</span>(<span class="fl">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 16.755160820242345</code></pre>
</div>
</div>
<p>If it is possible to express the region to integrate as <span class="math inline">\(G(R)\)</span> where <span class="math inline">\(R\)</span> is a rectangular region, then the change of variables formula,</p>
<p><span class="math display">\[
\iint_{G(R)} f(x) dA = \iint_R (f\circ G)(u) |det(J_G(u))| dU
\]</span></p>
<p>turns the integral into the non-rectangular domain <span class="math inline">\(G(R)\)</span> into one over the rectangular domain <span class="math inline">\(R\)</span>. The key is to <em>identify</em> <span class="math inline">\(G\)</span> and to compute the Jacobian. The latter is simply accomplished with <code>ForwardDiff.jacobian</code>.</p>
<p>For an example, we find the moment of inertia about the axis of the unit square tilted counter-clockwise an angle <span class="math inline">\(0 \leq \alpha \leq \pi/2\)</span>.</p>
<p>The counter clockwise rotation of a unit square by angle <span class="math inline">\(\alpha\)</span> is described by</p>
<p><span class="math display">\[
G(u, v) = \langle \cos(\alpha)\cdot u - \sin(\alpha)\cdot v, \sin(\alpha)\cdot u, +\cos(\alpha)\cdot v \rangle
\]</span></p>
<p>So we have <span class="math inline">\(\iint_{G(R)} x^2 dA\)</span> is computed by the following with <span class="math inline">\(\alpha=\pi/4\)</span>:</p>
<div id="110" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">LinearAlgebra</span>: det</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="fu">𝑓</span>(uv) <span class="op">=</span> uv[<span class="fl">1</span>]<span class="op">^</span><span class="fl">2</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">G</span>(uv)</span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>    α <span class="op">=</span> <span class="cn">pi</span><span class="op">/</span><span class="fl">4</span> <span class="co"># could be made a parameter</span></span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a>    u,v <span class="op">=</span> uv</span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a>    [<span class="fu">cos</span>(α)<span class="op">*</span>u <span class="op">-</span> <span class="fu">sin</span>(α)<span class="op">*</span>v, <span class="fu">sin</span>(α)<span class="op">*</span>u <span class="op">+</span> <span class="fu">cos</span>(α)<span class="op">*</span>v]</span>
<span id="cb98-11"><a href="#cb98-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-12"><a href="#cb98-12" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb98-13"><a href="#cb98-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-14"><a href="#cb98-14" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(u, p) <span class="op">=</span> (𝑓<span class="op">∘</span>G)(u) <span class="op">*</span> <span class="fu">det</span>(ForwardDiff.<span class="fu">jacobian</span>(G, u))</span>
<span id="cb98-15"><a href="#cb98-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-16"><a href="#cb98-16" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">IntegralProblem</span>(f, [<span class="fl">0</span>,<span class="fl">0</span>], [<span class="fl">1</span>,<span class="fl">1</span>])</span>
<span id="cb98-17"><a href="#cb98-17" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(prob, <span class="fu">HCubatureJL</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 0.08333333333333331</code></pre>
</div>
</div>
</section>
<section id="f-rn-rightarrow-rm" class="level4">
<h4 class="anchored" data-anchor-id="f-rn-rightarrow-rm"><span class="math inline">\(f: R^n \rightarrow R^m\)</span></h4>
<p>The <code>Integrals</code> package provides an interface for vector-valued functions. By default, the number of dimensions in the output is assumed to be <span class="math inline">\(1\)</span>, but the <code>nout</code> argument can adjust that.</p>
<p>Let <span class="math inline">\(f\)</span> be vector valued with components <span class="math inline">\(f_1, f_2, \dots, f_m\)</span>, then the output below is the vector with components <span class="math inline">\(\iint_R f_1 dV, \iint_R f_2 dV, \dots, \iint_R f_m dV\)</span>.</p>
<p>For a trivial example, we have:</p>
<div id="112" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(x, p) <span class="op">=</span> [x[<span class="fl">1</span>], x[<span class="fl">2</span>]<span class="op">^</span><span class="fl">2</span>]</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>prob <span class="op">=</span> <span class="fu">IntegralProblem</span>(f, [<span class="fl">0</span>,<span class="fl">0</span>],[<span class="fl">3</span>,<span class="fl">4</span>])</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(prob, <span class="fu">HCubatureJL</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>retcode: Success
u: 2-element Vector{Float64}:
 18.0
 64.0</code></pre>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../alternatives/symbolics.html" class="pagination-link" aria-label="Symbolics.jl">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">67</span>&nbsp; <span class="chapter-title">Symbolics.jl</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../alternatives/plotly_plotting.html" class="pagination-link" aria-label="JavaScript based plotting libraries">
        <span class="nav-page-text"><span class="chapter-number">69</span>&nbsp; <span class="chapter-title">JavaScript based plotting libraries</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2022-25, John Verzani</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/jverzani/CalculusWithJuliaNotes.jl/edit/main/quarto/alternatives/SciML.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/jverzani/CalculusWithJuliaNotes.jl/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>